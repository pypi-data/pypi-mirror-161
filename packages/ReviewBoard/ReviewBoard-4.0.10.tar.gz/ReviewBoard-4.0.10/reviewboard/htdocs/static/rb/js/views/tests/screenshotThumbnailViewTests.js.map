{"version":3,"sources":["screenshotThumbnailViewTests.es6.js"],"names":[],"mappings":"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","file":"screenshotThumbnailViewTests.js","sourcesContent":["suite('rb/views/ScreenshotThumbnail', function() {\n    let model;\n    let view;\n\n    beforeEach(function() {\n        model = new RB.Screenshot();\n        model.url = '/screenshots/123/';\n        model.id = 123;\n        model.attributes.id = 123;\n        model.set('loaded', true);\n\n        const template =\n            '<div><a class=\"edit\"></a><a class=\"delete\">X</a></div>';\n\n        view = new RB.ScreenshotThumbnail({\n            el: $(template).appendTo($testsScratch),\n            model: model,\n        });\n        view.render();\n\n        spyOn(model, 'trigger').and.callThrough();\n        spyOn(view, 'trigger').and.callThrough();\n    });\n\n    describe('Actions', function() {\n        it('Begin caption editing', function() {\n            view.$caption.inlineEditor('startEdit');\n            expect(view.trigger).toHaveBeenCalledWith('beginEdit');\n        });\n\n        it('Cancel caption editing', function() {\n            view.$caption.inlineEditor('startEdit');\n            expect(view.trigger).toHaveBeenCalledWith('beginEdit');\n\n            view.$caption.inlineEditor('cancel');\n            expect(view.trigger).toHaveBeenCalledWith('endEdit');\n        });\n\n        it('Save caption', function() {\n            spyOn(model, 'save');\n\n            view.$caption.inlineEditor('startEdit');\n            expect(view.trigger).toHaveBeenCalledWith('beginEdit');\n\n            view.$el.find('input')\n                .val('Foo')\n                .triggerHandler('keyup');\n            view.$caption.inlineEditor('submit');\n\n            expect(view.trigger).toHaveBeenCalledWith('endEdit');\n            expect(model.get('caption')).toBe('Foo');\n            expect(model.save).toHaveBeenCalled();\n        });\n\n        it('Delete', function() {\n            spyOn(model, 'destroy').and.callThrough();\n            spyOn($, 'ajax').and.callFake(options => options.success());\n            spyOn(view.$el, 'fadeOut').and.callFake(done => done());\n\n            spyOn(view, 'remove');\n\n            view.$el.find('a.delete').click();\n\n            expect($.ajax).toHaveBeenCalled();\n            expect(model.destroy).toHaveBeenCalled();\n            expect(model.trigger.calls.argsFor(0)[0]).toBe('destroying');\n            expect(view.$el.fadeOut).toHaveBeenCalled();\n            expect(view.remove).toHaveBeenCalled();\n        });\n    });\n});\n"]}