{"version":3,"sources":["repositoryCollection.es6.js"],"names":[],"mappings":";;AAAA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE,CAAC,oBAAH,GAA0B,EAAE,CAAC,cAAH,CAAkB,MAAlB,CAAyB;EAC/C,KAAK,EAAE,EAAE,CAAC,UADqC;;EAG/C;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACI,UAAU,CAAC,MAAD,EAAS,OAAT,EAAkB;IACxB,KAAK,UAAL,GAAkB,IAAI,EAAE,CAAC,kBAAP,CAA0B,OAAO,CAAC,YAAlC,EAAgD;MAC9D,cAAc,EAAE,EAD8C;MAE9D,KAAK,EAAE,KAAK;IAFkD,CAAhD,CAAlB;IAIA,KAAK,UAAL,CAAgB,SAAhB,GAA4B,SAAS,GAAG,OAAO,CAAC,eAApB,GACA,mBAD5B;IAGA,KAAK,mBAAL,GAA2B,IAAI,EAAE,CAAC,UAAP,CAAkB;MACzC,IAAI,2CADqC;MAEzC,WAAW,EAAE,EAF4B;MAGzC,eAAe,EAAE,OAAO,CAAC,eAHgB;MAIzC,kBAAkB,EAAE,KAJqB;MAKzC,SAAS,EAAE;IAL8B,CAAlB,CAA3B;IAQA,KAAK,QAAL,CAAc,KAAK,UAAnB,EAA+B,KAA/B,EAAsC,KAAK,GAA3C;IACA,KAAK,QAAL,CAAc,KAAK,UAAnB,EAA+B,QAA/B,EAAyC,KAAK,MAA9C;IACA,KAAK,QAAL,CAAc,KAAK,UAAnB,EAA+B,OAA/B,EAAwC,KAAK,QAA7C;;IAEA,KAAK,QAAL;EACH,CAlC8C;;EAoC/C;AACJ;AACA;EACI,QAAQ,GAAG;IACP,KAAK,KAAL,CAAW,CAAC,KAAK,mBAAN,EAA2B,MAA3B,CAAkC,KAAK,UAAL,CAAgB,MAAlD,CAAX;EACH,CAzC8C;;EA2C/C;AACJ;AACA;AACA;AACA;AACA;AACA;EACI,MAAM,CAAC,KAAD,EAAQ;IACV,KAAK,UAAL,CAAgB,cAAhB,CAA+B,CAA/B,GAAmC,KAAnC;IACA,KAAK,UAAL,CAAgB,KAAhB,CAAsB;MAClB,OAAO,EAAE,MAAM,KAAK,QAAL;IADG,CAAtB;EAGH;;AAvD8C,CAAzB,CAA1B","file":"repositoryCollection.js","sourcesContent":["/**\n * A collection for displaying repositories in the \"New Review Request\" page.\n *\n * Version Added:\n *     4.0.7\n */\nRB.RepositoryCollection = RB.BaseCollection.extend({\n    model: RB.Repository,\n\n    /**\n     * Initialize the collection.\n     *\n     * Args:\n     *     models (Array of object):\n     *         Initial models for the collection.\n     *\n     *     options (object):\n     *         Options for the collection.\n     */\n    initialize(models, options) {\n        this.collection = new RB.ResourceCollection(options.repositories, {\n            extraQueryData: {},\n            model: this.model,\n        });\n        this.collection._fetchURL = SITE_ROOT + options.localSitePrefix +\n                                    'api/repositories/';\n\n        this._fileAttachmentRepo = new RB.Repository({\n            name: gettext('(None - File attachments only)'),\n            scmtoolName: '',\n            localSitePrefix: options.localSitePrefix,\n            supportsPostCommit: false,\n            filesOnly: true,\n        });\n\n        this.listenTo(this.collection, 'add', this.add);\n        this.listenTo(this.collection, 'remove', this.remove);\n        this.listenTo(this.collection, 'reset', this._rebuild);\n\n        this._rebuild();\n    },\n\n    /**\n     * Rebuild the list of models.\n     */\n    _rebuild() {\n        this.reset([this._fileAttachmentRepo].concat(this.collection.models));\n    },\n\n    /**\n     * Perform a search.\n     *\n     * Args:\n     *     query (string):\n     *         The query to search for in repository names and paths.\n     */\n    search(query) {\n        this.collection.extraQueryData.q = query;\n        this.collection.fetch({\n            success: () => this._rebuild(),\n        });\n    },\n});\n"]}