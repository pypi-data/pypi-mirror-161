{"version":3,"sources":["webhookFormView.es6.js"],"names":[],"mappings":";;AAAA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE,CAAC,eAAH,GAAqB,QAAQ,CAAC,IAAT,CAAc,MAAd,CAAqB;EACtC,MAAM,EAAE;IACJ,uBAAuB,mBADnB;IAEJ,uBAAuB,oBAFnB;IAGJ,iCAAiC,4BAH7B;IAIJ,uBAAuB;EAJnB,CAD8B;;EAQtC;AACJ;AACA;AACA;AACA;AACA;AACA;EACI,MAAM,GAAG;IACL,KAAK,UAAL,GAAkB,CAAC,CAAC,cAAD,CAAnB;IACA,KAAK,iBAAL,GAAyB,CAAC,CAAC,YAAD,CAAD,CAAgB,IAAhB,CAAqB,OAArB,CAAzB;IACA,KAAK,mBAAL,GAA2B,KAAK,iBAAL,CAAuB,MAAvB,CAA8B,aAA9B,CAA3B;IACA,KAAK,SAAL,GAAiB,CAAC,CAAC,cAAD,CAAlB;IACA,KAAK,iBAAL,GAAyB,KAAK,SAAL,CAAe,IAAf,CAAoB,aAApB,CAAzB;IACA,KAAK,kBAAL,GAA0B,KAAK,CAAL,CAAO,uBAAP,CAA1B;IACA,KAAK,UAAL,GAAkB,KAAK,CAAL,CAAO,qBAAP,CAAlB;IACA,KAAK,kBAAL,GAA0B,CAAC,CAAC,wBAAD,CAA3B;IAEA,KAAK,WAAL,GAAmB,UAAU,CAAC,YAAX,CAAwB,CAAC,CAAC,oBAAD,CAAD,CAAwB,CAAxB,CAAxB,EAAoD;MACnE,aAAa,EAAE,IADoD;MAEnE,IAAI,EAAE;IAF6D,CAApD,CAAnB;;IAKA,KAAK,kBAAL,CAAwB,IAAxB,CAA6B,QAA7B,EACK,MADL,CACY,OADZ,EAEK,MAFL,CAGQ,CAAC,CAAC,MAAD,CAAD,CACK,IADL,CACU,MADV,EACkB,UAAU,GAAG,+BAAb,GACN,kBAFZ,EAGK,IAHL,qCAHR;IASA;AACR;AACA;AACA;;;IACQ,KAAK,mBAAL;;IACA,KAAK,iBAAL;;IACA,KAAK,kBAAL;;IACA,KAAK,0BAAL;;IAEA,OAAO,IAAP;EACH,CAjDqC;;EAmDtC;AACJ;AACA;AACA;AACA;EACI,mBAAmB,GAAG;IAClB,KAAK,iBAAL,CAAuB,GAAvB,CAA2B,KAAK,mBAAhC,EAAqD,IAArD,CACI,UADJ,EACgB,KAAK,mBAAL,CAAyB,CAAzB,EAA4B,OAD5C;EAEH,CA3DqC;;EA6DtC;AACJ;AACA;AACA;AACA;AACA;EACI,iBAAiB,GAAG;IAChB,KAAK,UAAL,CAAgB,UAAhB,CAA2B,KAAK,iBAAL,CAAuB,CAAvB,EAA0B,OAArD;EACH,CArEqC;;EAuEtC;AACJ;AACA;AACA;AACA;EACI,kBAAkB,GAAG;IACjB,KAAK,WAAL,CAAiB,SAAjB,CAA2B,MAA3B,EAAmC,KAAK,UAAL,CAAgB,GAAhB,EAAnC;EACH,CA9EqC;;EAgFtC;AACJ;AACA;AACA;AACA;EACI,0BAA0B,GAAG;IACzB,KAAK,kBAAL,CAAwB,UAAxB,CAAmC,KAAK,kBAAL,CAAwB,CAAxB,EAA2B,OAA9D;EACH;;AAvFqC,CAArB,CAArB","file":"webhookFormView.js","sourcesContent":["/**\n * Manages UI for the Add/Edit Webhook form.\n *\n * This will manage the visibility of different page elements, create a\n * CodeMirror for editing, and manage CodeMirror's properties.\n */\nRB.WebhookFormView = Backbone.View.extend({\n    events: {\n        'change #id_apply_to': '_onApplyToChanged',\n        'change #id_encoding': '_onEncodingChanged',\n        'change #id_use_custom_content': '_onUseCustomContentToggled',\n        'change #id_events_0': '_onAllEventsToggled',\n    },\n\n    /**\n     * Render the view.\n     *\n     * Returns:\n     *     RB.WebhookFormView:\n     *     This object, for chaining.\n     */\n    render() {\n        this._$encoding = $('#id_encoding');\n        this._$eventCheckboxes = $('#id_events').find('input');\n        this._$allEventsCheckbox = this._$eventCheckboxes.filter('[value=\"*\"]');\n        this._$applyTo = $('#id_apply_to');\n        this._$applyToSelected = this._$applyTo.find('[value=\"S\"]');\n        this._$customContentRow = this.$('.field-custom_content');\n        this._$reposRow = this.$('.field-repositories');\n        this._$useCustomContent = $('#id_use_custom_content');\n\n        this._codeMirror = CodeMirror.fromTextArea($('#id_custom_content')[0], {\n            matchBrackets: true,\n            mode: 'application/json',\n        });\n\n        this._$customContentRow.find('p.help')\n            .append('<br/>')\n            .append(\n                $('<a/>')\n                    .attr('href', MANUAL_URL + 'admin/configuration/webhooks/'\n                          + '#custom-payloads')\n                    .text(gettext('Custom payload reference'))\n                );\n\n        /*\n         * Activate these handlers so that the form will be in the correct\n         * state.\n         */\n        this._onAllEventsToggled();\n        this._onApplyToChanged();\n        this._onEncodingChanged();\n        this._onUseCustomContentToggled();\n\n        return this;\n    },\n\n    /**\n     * Handler for when the All Events checkbox is toggled.\n     *\n     * Sets the other events to be disabled if the checkbox is checked.\n     */\n    _onAllEventsToggled() {\n        this._$eventCheckboxes.not(this._$allEventsCheckbox).prop(\n            'disabled', this._$allEventsCheckbox[0].checked);\n    },\n\n    /**\n     * Handler for when the Apply To radio buttons are changed.\n     *\n     * Toggles the visibility of the Repositories list, depending on the\n     * selected radio button.\n     */\n    _onApplyToChanged() {\n        this._$reposRow.setVisible(this._$applyToSelected[0].checked);\n    },\n\n    /**\n     * Handler for when the Encoding drop-down is changed.\n     *\n     * Sets the CodeMirror mode based on the encoding value.\n     */\n    _onEncodingChanged() {\n        this._codeMirror.setOption('mode', this._$encoding.val());\n    },\n\n    /**\n     * Handler for when the Use Custom Content checkbox is toggled.\n     *\n     * Toggles the visibility of the text box to match the checkbox.\n     */\n    _onUseCustomContentToggled() {\n        this._$customContentRow.setVisible(this._$useCustomContent[0].checked);\n    },\n});\n"]}