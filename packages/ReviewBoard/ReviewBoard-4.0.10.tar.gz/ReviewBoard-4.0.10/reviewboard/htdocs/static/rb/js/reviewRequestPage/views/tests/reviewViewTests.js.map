{"version":3,"sources":["reviewViewTests.es6.js"],"names":[],"mappings":"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","file":"reviewViewTests.js","sourcesContent":["suite('rb/reviewRequestPage/views/ReviewView', function() {\n    const template = _.template(dedent`\n        <div class=\"review review-request-page-entry\">\n         <div class=\"review-request-page-entry-contents\">\n          <div class=\"collapse-button\"></div>\n          <div class=\"banners\">\n           <input type=\"button\" value=\"Publish\" />\n           <input type=\"button\" value=\"Discard\" />\n          </div>\n          <div class=\"body\">\n           <ol class=\"review-comments\">\n            <li>\n             <div class=\"review-comment-details\">\n              <div class=\"review-comment\">\n               <pre class=\"reviewtext body_top\"></pre>\n              </div>\n             </div>\n             <div class=\"review-comment-thread\">\n              <div class=\"comment-section\"\n                   data-context-type=\"body_top\"\n                   data-reply-anchor-prefix=\"header-reply\">\n               <a class=\"add_comment_link\"></a>\n               <ul class=\"reply-comments\">\n                <li class=\"draft\" data-comment-id=\"456\">\n                 <pre class=\"reviewtext\"></pre>\n                </li>\n               </ul>\n              </div>\n             </div>\n            </li>\n            <li>\n             <div class=\"review-comment-thread\">\n              <div class=\"comment-section\" data-context-id=\"123\"\n                   data-context-type=\"diff_comments\"\n                   data-reply-anchor-prefix=\"comment\">\n               <a class=\"add_comment_link\"></a>\n               <ul class=\"reply-comments\"></ul>\n              </div>\n             </div>\n            </li>\n            <li>\n             <div class=\"review-comment-details\">\n              <div class=\"review-comment\">\n               <pre class=\"reviewtext body_bottom\"></pre>\n              </div>\n             </div>\n             <div class=\"review-comment-thread\">\n              <div class=\"comment-section\"\n                   data-context-type=\"body_bottom\"\n                   data-reply-anchor-prefix=\"footer-reply\">\n               <a class=\"add_comment_link\"></a>\n               <ul class=\"reply-comments\"></ul>\n              </div>\n             </div>\n            </div>\n           </li>\n          </ol>\n         </div>\n        </div>\n    `);\n    let view;\n    let review;\n    let reviewReply;\n\n    beforeEach(function() {\n        const reviewRequest = new RB.ReviewRequest();\n        const editor = new RB.ReviewRequestEditor({\n            reviewRequest: reviewRequest,\n        });\n\n        review = reviewRequest.createReview({\n            loaded: true,\n            links: {\n                replies: {\n                    href: '/api/review/123/replies/',\n                },\n            },\n        });\n\n        const $el = $(template()).appendTo($testsScratch);\n\n        reviewReply = review.createReply();\n\n        view = new RB.ReviewRequestPage.ReviewView({\n            el: $el,\n            model: review,\n            entryModel: new RB.ReviewRequestPage.ReviewEntry({\n                review: review,\n                reviewRequest: reviewRequest,\n                reviewRequestEditor: editor,\n            }),\n        });\n\n        view._setupNewReply(reviewReply);\n\n        spyOn(view, 'trigger').and.callThrough();\n\n        view.render();\n    });\n\n    describe('Model events', function() {\n        it('bodyTop changed', function() {\n            review.set({\n                bodyTop: 'new **body** top',\n                htmlTextFields: {\n                    bodyTop: '<p>new <strong>body</strong> top</p>',\n                },\n            });\n\n            expect(view._$bodyTop.html())\n                .toBe('<p>new <strong>body</strong> top</p>');\n        });\n\n        it('bodyBottom changed', function() {\n            review.set({\n                bodyBottom: 'new **body** bottom',\n                htmlTextFields: {\n                    bodyBottom: '<p>new <strong>body</strong> bottom</p>',\n                },\n            });\n\n            expect(view._$bodyBottom.html())\n                .toBe('<p>new <strong>body</strong> bottom</p>');\n        });\n\n        describe('bodyTopRichText changed', function() {\n            it('To true', function() {\n                expect(view._$bodyTop.hasClass('rich-text')).toBe(false);\n                review.set('bodyTopRichText', true);\n                expect(view._$bodyTop.hasClass('rich-text')).toBe(true);\n            });\n\n            it('To false', function() {\n                review.attributes.bodyTopRichText = true;\n                view._$bodyTop.addClass('rich-text');\n\n                review.set('bodyTopRichText', false);\n                expect(view._$bodyTop.hasClass('rich-text')).toBe(false);\n            });\n        });\n\n        describe('bodyBottomRichText changed', function() {\n            it('To true', function() {\n                expect(view._$bodyBottom.hasClass('rich-text')).toBe(false);\n                review.set('bodyBottomRichText', true);\n                expect(view._$bodyBottom.hasClass('rich-text')).toBe(true);\n            });\n\n            it('To false', function() {\n                review.attributes.bodyBottomRichText = true;\n                view._$bodyBottom.addClass('rich-text');\n\n                review.set('bodyBottomRichText', false);\n                expect(view._$bodyBottom.hasClass('rich-text')).toBe(false);\n            });\n        });\n    });\n\n    describe('Reply editors', function() {\n        it('Views created', function() {\n            expect(view._replyEditorViews.length).toBe(3);\n        });\n\n        it('Initial state populated', function() {\n            let model = view._replyEditorViews[0].model;\n\n            expect(model.get('anchorPrefix')).toBe('header-reply');\n            expect(model.get('contextID')).toBe(null);\n            expect(model.get('contextType')).toBe('body_top');\n            expect(model.get('hasDraft')).toBe(true);\n\n            model = view._replyEditorViews[1].model;\n            expect(model.get('anchorPrefix')).toBe('comment');\n            expect(model.get('contextID')).toBe(123);\n            expect(model.get('contextType')).toBe('diff_comments');\n            expect(model.get('hasDraft')).toBe(false);\n\n            model = view._replyEditorViews[2].model;\n            expect(model.get('anchorPrefix')).toBe('footer-reply');\n            expect(model.get('contextID')).toBe(null);\n            expect(model.get('contextType')).toBe('body_bottom');\n            expect(model.get('hasDraft')).toBe(false);\n\n            expect(view._replyDraftsCount).toBe(1);\n        });\n\n        it('Draft banner when draft comment exists', function() {\n            expect(view.trigger)\n                .toHaveBeenCalledWith('hasDraftChanged', true);\n        });\n\n        describe('reviewReply changes on', function() {\n            it('Discard', function() {\n                spyOn(view, '_setupNewReply');\n\n                spyOn(reviewReply, 'discardIfEmpty').and.callFake(\n                    (options, context) => options.success.call(context));\n\n                reviewReply.trigger('destroyed');\n\n                expect(view._setupNewReply).toHaveBeenCalled();\n            });\n\n            it('Publish', function() {\n                spyOn(view, '_setupNewReply');\n\n                /*\n                 * Avoid any of the steps in saving the replies. This\n                 * short-circuits a lot of the logic, but for the purposes\n                 * of this test, it's sufficient.\n                 */\n                spyOn(RB.BaseResource.prototype, 'ready');\n\n                /*\n                 * Save each editor, so the necessary state is available for\n                 * the publish operation.\n                 */\n                view._replyEditors.forEach(editor => editor.save());\n                reviewReply.trigger('published');\n\n                expect(view._setupNewReply).toHaveBeenCalled();\n            });\n        });\n\n        describe('When draft deleted', function() {\n            describe('With last one', function() {\n                it('Draft banner hidden', function() {\n                    const editor = view._replyEditors[0];\n                    expect(editor.get('hasDraft')).toBe(true);\n                    expect(view._replyDraftsCount).toBe(1);\n                    expect(view._draftBannerShown).toBe(true);\n\n                    editor.set('hasDraft', false);\n                    expect(view._replyDraftsCount).toBe(0);\n                    expect(view._draftBannerShown).toBe(false);\n                });\n            });\n\n            describe('With more remaining', function() {\n                it('Draft banner stays visible', function() {\n                    view._replyEditors[1].set('hasDraft', true);\n\n                    const editor = view._replyEditors[0];\n                    expect(editor.get('hasDraft')).toBe(true);\n\n                    expect(view._replyDraftsCount).toBe(2);\n                    expect(view._draftBannerShown).toBe(true);\n\n                    editor.set('hasDraft', false);\n                    expect(view._replyDraftsCount).toBe(1);\n                    expect(view._draftBannerShown).toBe(true);\n                });\n            });\n        });\n\n        describe('When reviewReply changes', function() {\n            it('Signals connected', function() {\n                spyOn(view, 'listenTo').and.callThrough();\n\n                view._setupNewReply(new RB.ReviewReply());\n\n                expect(view.listenTo.calls.argsFor(0)[1])\n                    .toBe('destroyed published');\n            });\n\n            it('Signals disconnected from old reviewReply', function() {\n                spyOn(view, 'stopListening').and.callThrough();\n\n                view._setupNewReply();\n\n                expect(view.stopListening).toHaveBeenCalledWith(reviewReply);\n            });\n\n            it('Hide draft banner signal emitted', function() {\n                view._setupNewReply();\n                expect(view.trigger).toHaveBeenCalledWith('hasDraftChanged',\n                                                          false);\n            });\n\n            it('Editors updated', function() {\n                view._setupNewReply();\n\n                view._replyEditors.forEach(editor =>\n                    expect(editor.get('reviewReply')).toBe(view._reviewReply));\n            });\n        });\n    });\n});\n"]}