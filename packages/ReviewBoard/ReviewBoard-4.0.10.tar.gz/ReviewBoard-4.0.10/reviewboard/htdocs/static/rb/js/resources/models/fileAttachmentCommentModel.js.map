{"version":3,"sources":["fileAttachmentCommentModel.es6.js"],"names":[],"mappings":"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","file":"fileAttachmentCommentModel.js","sourcesContent":["/**\n * A comment on a file attachment.\n *\n * Model Attributes:\n *     diffAgainstFileAttachmentID (number):\n *         The ID of the file attachment that is the \"new\" side of a comment on\n *         a file diff.\n *\n *     diffAgainstFileAttachment (RB.FileAttachment):\n *         The file attachment that is the \"new\" side of a comment on a file\n *         diff.\n *\n *     fileAttachmentID (number):\n *         The ID of the file attachment that the comment is on, or the ID of\n *         the file attachment that is the \"old\" side of a comment on a file\n *         diff.\n *\n *     fileAttachment (RB.FileAttachment):\n *         The file attachment that the comment is on, or the ID of the file\n *         attachment that is the \"old\" side of a comment on a file diff.\n *\n *     linkText (string):\n *         The text used to describe a link to the file. This may differ\n *         depending on the comment.\n *\n *     reviewURL (string):\n *         The URL for the file attachment review UI for the comment.\n *\n *     thumbnailHTML (string):\n *         The HTML representing a thumbnail, if any, for this comment.\n */\nRB.FileAttachmentComment = RB.BaseComment.extend({\n    defaults: _.defaults({\n        diffAgainstFileAttachmentID: null,\n        diffAgainstFileAttachment: null,\n        fileAttachmentID: null,\n        fileAttachment: null,\n        linkText: null,\n        reviewURL: null,\n        thumbnailHTML: null\n    }, RB.BaseComment.prototype.defaults()),\n\n    rspNamespace: 'file_attachment_comment',\n    expandedFields: ['diff_against_file_attachment', 'file_attachment'],\n\n    attrToJsonMap: _.defaults({\n        diffAgainstFileAttachmentID: 'diff_against_file_attachment_id',\n        fileAttachmentID: 'file_attachment_id',\n        linkText: 'link_text',\n        reviewURL: 'review_url',\n        thumbnailHTML: 'thumbnail_html'\n    }, RB.BaseComment.prototype.attrToJsonMap),\n\n    serializedAttrs: [\n        'diffAgainstFileAttachmentID',\n        'fileAttachmentID'\n    ].concat(RB.BaseComment.prototype.serializedAttrs),\n\n    deserializedAttrs: [\n        'linkText',\n        'thumbnailHTML',\n        'reviewURL'\n    ].concat(RB.BaseComment.prototype.deserializedAttrs),\n\n    serializers: _.defaults({\n        fileAttachmentID: RB.JSONSerializers.onlyIfUnloaded,\n        diffAgainstFileAttachmentID: RB.JSONSerializers.onlyIfUnloadedAndValue\n    }, RB.BaseComment.prototype.serializers),\n\n    /**\n     * Deserialize comment data from an API payload.\n     *\n     * Args:\n     *     rsp (object):\n     *         The response from the server.\n     *\n     * Returns:\n     *     object:\n     *     Attribute values to set on the model.\n     */\n    parseResourceData(rsp) {\n        const result = RB.BaseComment.prototype.parseResourceData.call(\n            this, rsp);\n\n        result.fileAttachment = new RB.FileAttachment(rsp.file_attachment, {\n            parse: true\n        });\n        result.fileAttachmentID = result.fileAttachment.id;\n\n        if (rsp.diff_against_file_attachment) {\n            result.diffAgainstFileAttachment = new RB.FileAttachment(\n                rsp.diff_against_file_attachment, {\n                    parse: true\n                });\n\n            result.diffAgainstFileAttachmentID =\n                result.diffAgainstFileAttachment.id;\n        }\n\n        return result;\n    },\n\n    /**\n     * Perform validation on the attributes of the model.\n     *\n     * This will check the file attachment ID along with the default\n     * comment validation.\n     *\n     * Args:\n     *     attrs (object):\n     *         Model attributes to validate.\n     *\n     *     options (object):\n     *         Additional options for the operation.\n     *\n     * Returns:\n     *     string:\n     *     An error string, if appropriate.\n     */\n    validate(attrs, options) {\n        if (_.has(attrs, 'fileAttachmentID') && !attrs.fileAttachmentID) {\n            return RB.FileAttachmentComment.strings.INVALID_FILE_ATTACHMENT_ID;\n        }\n\n        return _super(this).validate.call(this, attrs, options);\n    }\n}, {\n    strings: {\n        INVALID_FILE_ATTACHMENT_ID: 'fileAttachmentID must be a valid ID'\n    }\n});\n"]}