{"version":3,"sources":["menuButtonViewTests.es6.js"],"names":[],"mappings":"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","file":"menuButtonViewTests.js","sourcesContent":["suite('rb/ui/views/MenuButtonView', function() {\n    describe('Rendering', function() {\n        it('With primary button', function() {\n            const view = new RB.MenuButtonView({\n                ariaMenuLabel: 'Test ARIA label',\n                menuItems: [\n                    {text: 'Item 1'},\n                    {text: 'Item 2'},\n                    {text: 'Item 3'},\n                ],\n                onPrimaryButtonClick: () => {},\n                text: 'Button label',\n            });\n            view.render();\n\n            expect(view.el).toHaveClass('rb-c-menu-button');\n            expect(view.$el.attr('role')).toBe('group');\n            expect(view.$primaryButton.length).toBe(1);\n\n            const $primaryButton = view.$('.rb-c-menu-button__primary');\n            expect($primaryButton.length).toBe(1);\n\n            const $toggleButton = view.$('.rb-c-menu-button__toggle');\n            expect($toggleButton.length).toBe(1);\n            expect($toggleButton[0].id)\n                .toBe(view.menu.$el.attr('aria-labelledby'));\n            expect($toggleButton.attr('aria-label')).toBe('Test ARIA label');\n            expect($toggleButton.children()[0])\n                .toHaveClass('rb-icon-dropdown-arrow');\n\n            expect(view.menu.el.children.length).toBe(3);\n        });\n\n        it('Without primary button', function() {\n            const view = new RB.MenuButtonView({\n                ariaMenuLabel: 'Test ARIA label',\n                menuItems: [\n                    {text: 'Item 1'},\n                    {text: 'Item 2'},\n                ],\n                text: 'Button label',\n            });\n            view.render();\n\n            expect(view.el).toHaveClass('rb-c-menu-button');\n            expect(view.$el.attr('role')).toBe('group');\n            expect(view.$primaryButton).toBeNull();\n\n            const $primaryButton = view.$('.rb-c-menu-button__primary');\n            expect($primaryButton.length).toBe(0);\n\n            const $toggleButton = view.$('.rb-c-menu-button__toggle');\n            expect($toggleButton.length).toBe(1);\n            expect($toggleButton[0].id)\n                .toBe(view.menu.$el.attr('aria-labelledby'));\n            expect($toggleButton.attr('aria-label')).toBeUndefined();\n            expect($toggleButton.text().trim()).toBe('Button label');\n            expect($toggleButton.children()[0])\n                .toHaveClass('rb-icon-dropdown-arrow');\n\n            expect(view.menu.el.children.length).toBe(2);\n        });\n    });\n\n    describe('Events', function() {\n        let view;\n\n        function sendDropDownButtonEvent(name, options) {\n            view._$dropDownButton.trigger($.Event(name, options));\n        }\n\n        function sendKeyDown(keyCode) {\n            sendDropDownButtonEvent('keydown', {\n                which: keyCode,\n            });\n        }\n\n        beforeEach(function() {\n            view = new RB.MenuButtonView();\n            view.render();\n\n            /* Don't let this override any state we set. */\n            spyOn(view, '_updateMenuPosition');\n        });\n\n        describe('keydown', function() {\n            function openMenuTests(keyCode) {\n                it('With openDirection=up', function() {\n                    view._openDirection = 'up';\n                    spyOn(view.menu, 'focusLastItem');\n\n                    sendKeyDown(keyCode);\n\n                    expect(view.menu.isOpen).toBeTrue();\n                    expect(view.menu.focusLastItem).toHaveBeenCalled();\n                });\n\n                it('With openDirection=down', function() {\n                    view._openDirection = 'down';\n                    spyOn(view.menu, 'focusFirstItem');\n\n                    sendKeyDown(keyCode);\n\n                    expect(view.menu.isOpen).toBeTrue();\n                    expect(view.menu.focusFirstItem).toHaveBeenCalled();\n                });\n            }\n\n            describe('Return key opens menu', function() {\n                openMenuTests($.ui.keyCode.RETURN);\n            });\n\n            describe('Space key opens menu', function() {\n                openMenuTests($.ui.keyCode.SPACE);\n            });\n\n            describe('Down key opens menu', function() {\n                openMenuTests($.ui.keyCode.DOWN);\n            });\n\n            describe('Up key opens menu', function() {\n                openMenuTests($.ui.keyCode.UP);\n            });\n\n            it('Escape key closes menu', function() {\n                view.menu.open({\n                    animate: false,\n                });\n                expect(view.menu.isOpen).toBeTrue();\n\n                sendKeyDown($.ui.keyCode.ESCAPE);\n\n                expect(view.menu.isOpen).toBeFalse();\n            });\n        });\n\n        it('focusout closes menu', function() {\n            view.menu.open({\n                animate: false,\n            });\n\n            expect(view.menu.isOpen).toBeTrue();\n\n            sendDropDownButtonEvent('focusout', {\n                relatedTarget: $testsScratch[0],\n            });\n\n            expect(view.menu.isOpen).toBeFalse();\n        });\n    });\n});\n"]}