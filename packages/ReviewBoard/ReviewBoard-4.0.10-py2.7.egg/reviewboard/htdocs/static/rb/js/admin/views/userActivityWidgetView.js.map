{"version":3,"sources":["userActivityWidgetView.es6.js"],"names":[],"mappings":";;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE,CAAC,KAAH,CAAS,sBAAT,GAAkC,EAAE,CAAC,KAAH,CAAS,UAAT,CAAoB,MAApB,CAA2B;EACzD,QAAQ,EAAE,CAAC,CAAC,QAAF,iMAD+C;;EAQzD;AACJ;AACA;AACA;AACA;AACA;EACI,YAAY,GAAG;IACX,KAAK,QAAL,CAAc,IAAd,CAAmB,KAAK,QAAL,CAAc;MAC7B,UAAU,EAAE,KAAK,KAAL,CAAW,GAAX,CAAe,OAAf,CADiB;MAE7B,cAAc;IAFe,CAAd,CAAnB;IAKA,KAAK,OAAL,GAAe,KAAK,CAAL,CAAO,yCAAP,CAAf;;IAEA,KAAK,SAAL;EACH,CAvBwD;;EAyBzD;AACJ;AACA;AACA;AACA;EACI,UAAU,GAAG;IACT,KAAK,SAAL;EACH,CAhCwD;;EAkCzD;AACJ;AACA;EACI,SAAS,GAAG;IACR,MAAM,KAAK,GAAG,KAAK,KAAnB;IACA,MAAM,GAAG,GAAG,KAAK,CAAC,GAAN,CAAU,KAAV,CAAZ;IACA,MAAM,SAAS,GAAG,KAAK,CAAC,GAAN,CAAU,WAAV,CAAlB;IACA,MAAM,UAAU,GAAG,KAAK,CAAC,GAAN,CAAU,YAAV,CAAnB;IACA,MAAM,SAAS,GAAG,KAAK,CAAC,GAAN,CAAU,WAAV,CAAlB;IACA,MAAM,UAAU,GAAG,KAAK,CAAC,GAAN,CAAU,YAAV,CAAnB;IAEA,CAAC,CAAC,IAAF,CACI,KAAK,OADT,EAEI,CACI;MACI,IAAI,EAAE,GADV;MAEI,KAAK,EAAE,WAAW,yBACC,CAAC,GAAD,CADD;IAFtB,CADJ,EAMI;MACI,IAAI,EAAE,SADV;MAEI,KAAK,EAAE,WAAW,6BACC,CAAC,SAAD,CADD;IAFtB,CANJ,EAWI;MACI,IAAI,EAAE,UADV;MAEI,KAAK,EAAE,WAAW,8BACC,CAAC,UAAD,CADD;IAFtB,CAXJ,EAgBI;MACI,IAAI,EAAE,SADV;MAEI,KAAK,EAAE,WAAW,8BACC,CAAC,SAAD,CADD;IAFtB,CAhBJ,EAqBI;MACI,IAAI,EAAE,UADV;MAEI,KAAK,EAAE,WAAW,8BACC,CAAC,UAAD,CADD;IAFtB,CArBJ,CAFJ,EA6BI;MACI,MAAM,EAAE;QACJ,GAAG,EAAE;UACD,IAAI,EAAE,IADL;UAED,KAAK,EAAE;YACH,IAAI,EAAE,IADH;YAEH,MAAM,EAAE,CAFL;YAGH,UAAU,EAAE;cACR,OAAO,EAAE;YADD,CAHT;YAMH,SAAS,EAAE,CAAC,KAAD,EAAQ,MAAR,oBACC,IAAI,CAAC,KAAL,CAAW,MAAM,CAAC,OAAlB,CADD;UANR;QAFN;MADD;IADZ,CA7BJ;IA+CA,KAAK,OAAL,CAAa,aAAb;EACH;;AA7FwD,CAA3B,CAAlC","file":"userActivityWidgetView.js","sourcesContent":["/**\n * Displays stats on how often users have logged in or used Review Board.\n *\n * This is displayed as a pie graph, with a legend alongside it breaking\n * down the activity into 1-6 day, 7-29 day, 30-59 day, 60-89 day, and 90+\n * day ranges.\n */\nRB.Admin.UserActivityWidgetView = RB.Admin.WidgetView.extend({\n    template: _.template(dedent`\n        <div class=\"rb-c-admin-user-activity-widget__chart\"></div>\n        <div class=\"rb-c-admin-user-activity-widget__user-total\">\n         <%- userTotalLabel %>: <strong><%- totalUsers %></strong>\n        </div>\n    `),\n\n    /**\n     * Render the widget.\n     *\n     * This will build the basic structure of the widget's content and\n     * then plot the chart.\n     */\n    renderWidget() {\n        this.$content.html(this.template({\n            totalUsers: this.model.get('total'),\n            userTotalLabel: gettext('Total Users'),\n        }));\n\n        this._$chart = this.$('.rb-c-admin-user-activity-widget__chart');\n\n        this._plotData();\n    },\n\n    /**\n     * Handle updates to the size of the widget.\n     *\n     * This will re-render the chart for the new size.\n     */\n    updateSize() {\n        this._plotData();\n    },\n\n    /**\n     * Plot user activity into a chart.\n     */\n    _plotData() {\n        const model = this.model;\n        const now = model.get('now');\n        const sevenDays = model.get('sevenDays');\n        const thirtyDays = model.get('thirtyDays');\n        const sixtyDays = model.get('sixtyDays');\n        const ninetyDays = model.get('ninetyDays');\n\n        $.plot(\n            this._$chart,\n            [\n                {\n                    data: now,\n                    label: interpolate(gettext('Active (%s)'),\n                                       [now]),\n                },\n                {\n                    data: sevenDays,\n                    label: interpolate(gettext('7 days ago (%s)'),\n                                       [sevenDays]),\n                },\n                {\n                    data: thirtyDays,\n                    label: interpolate(gettext('30 days ago (%s)'),\n                                       [thirtyDays]),\n                },\n                {\n                    data: sixtyDays,\n                    label: interpolate(gettext('60 days ago (%s)'),\n                                       [sixtyDays]),\n                },\n                {\n                    data: ninetyDays,\n                    label: interpolate(gettext('90 days ago (%s)'),\n                                       [ninetyDays]),\n                },\n            ],\n            {\n                series: {\n                    pie: {\n                        show: true,\n                        label: {\n                            show: true,\n                            radius: 1,\n                            background: {\n                                opacity: 0.8,\n                            },\n                            formatter: (label, series) =>\n                                `<div>${Math.round(series.percent)}%</div>`,\n                        },\n                    },\n                },\n            }\n        );\n\n        this.trigger('sizeChanged');\n    },\n});\n"]}