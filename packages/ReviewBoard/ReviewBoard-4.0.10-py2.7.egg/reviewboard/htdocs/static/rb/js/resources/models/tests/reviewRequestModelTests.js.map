{"version":3,"sources":["reviewRequestModelTests.es6.js"],"names":[],"mappings":"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","file":"reviewRequestModelTests.js","sourcesContent":["suite('rb/resources/models/ReviewRequest', function() {\n    let reviewRequest;\n    let callbacks;\n\n    beforeEach(function() {\n        reviewRequest = new RB.ReviewRequest({\n            id: 1,\n        });\n\n        callbacks = {\n            success: () => {},\n            error: () => {},\n        };\n\n        spyOn(callbacks, 'success');\n        spyOn(callbacks, 'error');\n\n        spyOn(reviewRequest, 'ready').and.callFake(\n            (options, context) => options.ready.call(context));\n    });\n\n    it('createDiff', function() {\n        const diff = reviewRequest.createDiff();\n\n        expect(diff.get('parentObject')).toBe(reviewRequest);\n    });\n\n    it('createScreenshot', function() {\n        const screenshot = reviewRequest.createScreenshot(42);\n\n        expect(screenshot.get('parentObject')).toBe(reviewRequest);\n        expect(screenshot.id).toBe(42);\n    });\n\n    it('createFileAttachment', function() {\n        const fileAttachment = reviewRequest.createFileAttachment({\n            id: 42,\n        });\n\n        expect(fileAttachment.get('parentObject')).toBe(reviewRequest);\n        expect(fileAttachment.id).toBe(42);\n    });\n\n    it('parse', function() {\n        const data = reviewRequest.parse({\n            stat: 'ok',\n            review_request: {\n                id: 1,\n                branch: 'branch',\n                bugs_closed: 'bugsClosed',\n                close_description: 'closeDescription',\n                close_description_text_type: 'markdown',\n                description: 'description',\n                description_text_type: 'markdown',\n                last_updated: 'lastUpdated',\n                'public': 'public',\n                summary: 'summary',\n                target_groups: 'targetGroups',\n                target_people: 'targetPeople',\n                testing_done: 'testingDone',\n                testing_done_text_type: 'plain',\n            },\n        });\n\n        expect(data).not.toBe(undefined);\n        expect(data.id).toBe(1);\n        expect(data.branch).toBe('branch');\n        expect(data.bugsClosed).toBe('bugsClosed');\n        expect(data.closeDescription).toBe('closeDescription');\n        expect(data.closeDescriptionRichText).toBe(true);\n        expect(data.description).toBe('description');\n        expect(data.descriptionRichText).toBe(true);\n        expect(data.lastUpdated).toBe('lastUpdated');\n        expect(data.public).toBe('public');\n        expect(data.summary).toBe('summary');\n        expect(data.targetGroups).toBe('targetGroups');\n        expect(data.targetPeople).toBe('targetPeople');\n        expect(data.testingDone).toBe('testingDone');\n        expect(data.testingDoneRichText).toBe(false);\n    });\n\n    it('reopen', function() {\n        spyOn(RB, 'apiCall').and.callThrough();\n        spyOn($, 'ajax').and.callFake(request => {\n            expect(request.type).toBe('PUT');\n            expect(request.data.status).toBe('pending');\n\n            request.success({\n                stat: 'ok',\n                review_request: {\n                    id: 1,\n                    links: {},\n                },\n            });\n        });\n\n        reviewRequest.reopen({\n            success: callbacks.success,\n            error: callbacks.error,\n        });\n\n        expect(RB.apiCall).toHaveBeenCalled();\n        expect($.ajax).toHaveBeenCalled();\n        expect(callbacks.success).toHaveBeenCalled();\n        expect(callbacks.error).not.toHaveBeenCalled();\n    });\n\n    describe('createReview', function() {\n        it('With review ID', function() {\n            const review = reviewRequest.createReview(42);\n\n            expect(review.get('parentObject')).toBe(reviewRequest);\n            expect(review.get('id')).toBe(42);\n            expect(reviewRequest.get('draftReview')).toBe(null);\n            expect(reviewRequest.reviews.length).toBe(1);\n            expect(reviewRequest.reviews.get(42)).toBe(review);\n        });\n\n        it('Without review ID', function() {\n            const review1 = reviewRequest.createReview();\n            const review2 = reviewRequest.createReview();\n\n            expect(review1.get('parentObject')).toBe(reviewRequest);\n            expect(review1.id).toBeFalsy();\n            expect(reviewRequest.get('draftReview')).toBe(review1);\n            expect(review1).toBe(review2);\n            expect(reviewRequest.reviews.length).toBe(0);\n        });\n    });\n\n    describe('setStarred', function() {\n        const url = '/api/users/testuser/watched/review-requests/';\n        let session;\n\n        beforeEach(function() {\n            RB.UserSession.instance = null;\n            session = RB.UserSession.create({\n                username: 'testuser',\n                watchedReviewRequestsURL: url,\n            });\n\n            spyOn(session.watchedReviewRequests, 'addImmediately')\n                .and.callThrough();\n            spyOn(session.watchedReviewRequests, 'removeImmediately')\n                .and.callThrough();\n            spyOn(RB, 'apiCall').and.callThrough();\n        });\n\n        it('true', function() {\n            spyOn($, 'ajax').and.callFake(request => {\n                expect(request.type).toBe('POST');\n                expect(request.url).toBe(url);\n\n                request.success({\n                    stat: 'ok',\n                });\n            });\n\n            reviewRequest.setStarred(true, callbacks);\n\n            expect(session.watchedReviewRequests.addImmediately)\n                .toHaveBeenCalled();\n            expect(RB.apiCall).toHaveBeenCalled();\n            expect($.ajax).toHaveBeenCalled();\n            expect(callbacks.success).toHaveBeenCalled();\n            expect(callbacks.error).not.toHaveBeenCalled();\n        });\n\n        it('false', function() {\n            spyOn($, 'ajax').and.callFake(request => {\n                expect(request.type).toBe('DELETE');\n                expect(request.url).toBe(url + '1/');\n\n                request.success({\n                    stat: 'ok',\n                });\n            });\n\n            reviewRequest.setStarred(false, callbacks);\n\n            expect(session.watchedReviewRequests.removeImmediately)\n                .toHaveBeenCalled();\n            expect(RB.apiCall).toHaveBeenCalled();\n            expect($.ajax).toHaveBeenCalled();\n            expect(callbacks.success).toHaveBeenCalled();\n            expect(callbacks.error).not.toHaveBeenCalled();\n        });\n    });\n\n    describe('close', function() {\n        it('With type=CLOSE_DISCARDED', function() {\n            spyOn(RB, 'apiCall').and.callThrough();\n            spyOn($, 'ajax').and.callFake(request => {\n                expect(request.type).toBe('PUT');\n                expect(request.data.status).toBe('discarded');\n                expect(request.data.description).toBe(undefined);\n\n                request.success({\n                    stat: 'ok',\n                    review_request: {\n                        id: 1,\n                        links: {},\n                    },\n                });\n            });\n\n            reviewRequest.close({\n                type: RB.ReviewRequest.CLOSE_DISCARDED,\n                success: callbacks.success,\n                error: callbacks.error,\n            });\n\n            expect(RB.apiCall).toHaveBeenCalled();\n            expect($.ajax).toHaveBeenCalled();\n            expect(callbacks.success).toHaveBeenCalled();\n            expect(callbacks.error).not.toHaveBeenCalled();\n        });\n\n        it('With type=CLOSE_SUBMITTED', function() {\n            spyOn(RB, 'apiCall').and.callThrough();\n            spyOn($, 'ajax').and.callFake(request => {\n                expect(request.type).toBe('PUT');\n                expect(request.data.status).toBe('submitted');\n                expect(request.data.description).toBe(undefined);\n\n                request.success({\n                    stat: 'ok',\n                    review_request: {\n                        id: 1,\n                        links: {},\n                    }\n                });\n            });\n\n            reviewRequest.close({\n                type: RB.ReviewRequest.CLOSE_SUBMITTED,\n                success: callbacks.success,\n                error: callbacks.error,\n            });\n\n            expect(RB.apiCall).toHaveBeenCalled();\n            expect($.ajax).toHaveBeenCalled();\n            expect(callbacks.success).toHaveBeenCalled();\n            expect(callbacks.error).not.toHaveBeenCalled();\n        });\n\n        it('With invalid type', function() {\n            spyOn(RB, 'apiCall').and.callThrough();\n            spyOn($, 'ajax');\n\n            reviewRequest.close({\n                type: 'foo',\n                success: callbacks.success,\n                error: callbacks.error,\n            });\n\n            expect(RB.apiCall).not.toHaveBeenCalled();\n            expect($.ajax).not.toHaveBeenCalled();\n            expect(callbacks.success).not.toHaveBeenCalled();\n            expect(callbacks.error).toHaveBeenCalled();\n        });\n\n        it('With description', function() {\n            spyOn(RB, 'apiCall').and.callThrough();\n            spyOn($, 'ajax').and.callFake(request => {\n                expect(request.type).toBe('PUT');\n                expect(request.data.status).toBe('submitted');\n                expect(request.data.close_description).toBe('test');\n\n                request.success({\n                    stat: 'ok',\n                    review_request: {\n                        id: 1,\n                        links: {},\n                    },\n                });\n            });\n\n            reviewRequest.close({\n                type: RB.ReviewRequest.CLOSE_SUBMITTED,\n                description: 'test',\n                success: callbacks.success,\n                error: callbacks.error,\n            });\n\n            expect(RB.apiCall).toHaveBeenCalled();\n            expect($.ajax).toHaveBeenCalled();\n            expect(callbacks.success).toHaveBeenCalled();\n            expect(callbacks.error).not.toHaveBeenCalled();\n        });\n    });\n});\n"]}