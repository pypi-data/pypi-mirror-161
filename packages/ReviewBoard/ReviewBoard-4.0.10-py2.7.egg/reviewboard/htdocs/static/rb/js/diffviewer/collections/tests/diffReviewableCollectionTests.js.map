{"version":3,"sources":["diffReviewableCollectionTests.es6.js"],"names":[],"mappings":"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","file":"diffReviewableCollectionTests.js","sourcesContent":["suite('rb/diffviewer/collections/DiffReviewableCollection', function() {\n    describe('Construction', function() {\n        it('Sets reviewRequest', function() {\n            const reviewRequest = new RB.ReviewRequest();\n            const collection = new RB.DiffReviewableCollection([], {\n                reviewRequest: reviewRequest,\n            });\n\n            expect(collection.reviewRequest).toBe(reviewRequest);\n        });\n    });\n\n    describe('watchFiles', function() {\n        let collection;\n        let files;\n\n        beforeEach(function() {\n            collection = new RB.DiffReviewableCollection([], {\n                reviewRequest: new RB.ReviewRequest(),\n            });\n            files = new RB.DiffFileCollection();\n        });\n\n        it('Initially populates', function() {\n            spyOn(collection, '_populateFromFiles');\n\n            collection.watchFiles(files);\n\n            expect(collection._populateFromFiles).toHaveBeenCalled();\n        });\n\n        it('Populates on files.reset', function() {\n            spyOn(collection, 'trigger');\n            spyOn(collection, 'reset');\n\n            collection.watchFiles(files);\n\n            files.reset([\n                new RB.DiffFile({\n                    filediff: {\n                        id: 300,\n                        revision: 1,\n                    },\n                    index: 1,\n                    id: 100,\n                }),\n                new RB.DiffFile({\n                    filediff: {\n                        id: 301,\n                        revision: 1,\n                    },\n                    interfilediff: {\n                        id: 400,\n                        revision: 2,\n                    },\n                    index: 2,\n                    id: 101,\n                    commentCounts: [1],\n                }),\n                new RB.DiffFile({\n                    baseFileDiffID: 123,\n                    filediff: {\n                        id: 302,\n                        revision: 2,\n                    },\n                    forceInterdiff: true,\n                    forceInterdiffRevision: 1,\n                    index: 3,\n                    id: 102,\n                }),\n            ]);\n\n            expect(collection.reset).toHaveBeenCalled();\n            expect(collection.trigger).toHaveBeenCalledWith('populating');\n            expect(collection.trigger).toHaveBeenCalledWith('populated');\n            expect(collection.length).toBe(3);\n\n            let diffReviewable = collection.at(0);\n            expect(diffReviewable.get('baseFileDiffID')).toBe(null);\n            expect(diffReviewable.get('file').id).toBe(100);\n            expect(diffReviewable.get('reviewRequest'))\n                .toBe(collection.reviewRequest);\n            expect(diffReviewable.get('fileDiffID')).toBe(300);\n            expect(diffReviewable.get('interFileDiffID')).toBe(null);\n            expect(diffReviewable.get('revision')).toBe(1);\n            expect(diffReviewable.get('interdiffRevision')).toBe(null);\n\n            diffReviewable = collection.at(1);\n            expect(diffReviewable.get('baseFileDiffID')).toBe(null);\n            expect(diffReviewable.get('file').id).toBe(101);\n            expect(diffReviewable.get('reviewRequest'))\n                .toBe(collection.reviewRequest);\n            expect(diffReviewable.get('fileDiffID')).toBe(301);\n            expect(diffReviewable.get('interFileDiffID')).toBe(400);\n            expect(diffReviewable.get('revision')).toBe(1);\n            expect(diffReviewable.get('interdiffRevision')).toBe(2);\n            expect(diffReviewable.get('serializedCommentBlocks')).toEqual([1]);\n\n            diffReviewable = collection.at(2);\n            expect(diffReviewable.get('baseFileDiffID')).toBe(123);\n            expect(diffReviewable.get('file').id).toBe(102);\n            expect(diffReviewable.get('reviewRequest'))\n                .toBe(collection.reviewRequest);\n            expect(diffReviewable.get('fileDiffID')).toBe(302);\n            expect(diffReviewable.get('interFileDiffID')).toBe(null);\n            expect(diffReviewable.get('revision')).toBe(2);\n            expect(diffReviewable.get('interdiffRevision')).toBe(1);\n        });\n    });\n});\n"]}