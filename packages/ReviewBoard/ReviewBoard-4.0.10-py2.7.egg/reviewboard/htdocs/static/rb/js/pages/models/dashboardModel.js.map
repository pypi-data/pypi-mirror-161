{"version":3,"sources":["dashboardModel.es6.js"],"names":[],"mappings":";;AAAA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE,CAAC,SAAH,GAAe,EAAE,CAAC,YAAH,CAAgB,MAAhB,CAAuB;EAClC,aAAa,EAAE,EAAE,CAAC,aADgB;;EAGlC;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACI,mBAAmB,CAAC,OAAD,EAAU;IACzB,MAAM,cAAc,GAAG,KAAK,SAAL,CAAe,KAAf,EAAvB;IACA,MAAM,SAAS,GAAG,EAAlB;IACA,MAAM,QAAQ,GAAG,EAAjB;;IAEA,SAAS,SAAT,GAAqB;MACjB,IAAI,cAAc,CAAC,MAAf,KAA0B,CAA9B,EAAiC;QAC7B,KAAK,SAAL,CAAe,KAAf;QACA,KAAK,OAAL,CAAa,SAAb;QACA,OAAO,CAAC,MAAR,CAAe,SAAf,EAA0B,QAA1B;QACA;MACH;;MAED,MAAM,aAAa,GAAG,cAAc,CAAC,KAAf,EAAtB;MAEA,aAAa,CAAC,KAAd,CAAoB;QAChB,IAAI,EAAE,OAAO,CAAC,SADE;QAEhB,OAAO,EAAE,MAAM,SAAS,CAAC,IAAV,CAAe,aAAf,CAFC;QAGhB,KAAK,EAAE,MAAM,QAAQ,CAAC,IAAT,CAAc,aAAd,CAHG;QAIhB,QAAQ,EAAE,SAAS,CAAC,IAAV,CAAe,IAAf;MAJM,CAApB;IAMH;;IAED,SAAS,CAAC,IAAV,CAAe,IAAf;EACH,CA5CiC;;EA8ClC;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACI,gBAAgB,CAAC,cAAD,EAAiB;IAC7B,MAAM,cAAc,GAAG,KAAK,SAAL,CAAe,KAAf,EAAvB;IACA,MAAM,SAAS,GAAG,EAAlB;IACA,MAAM,QAAQ,GAAG,EAAjB;;IAEA,SAAS,QAAT,GAAoB;MAChB,IAAI,cAAc,CAAC,MAAf,KAA0B,CAA9B,EAAiC;QAC7B,KAAK,SAAL,CAAe,KAAf;QACA,KAAK,OAAL,CAAa,SAAb;QACA;MACH;;MAED,MAAM,aAAa,GAAG,cAAc,CAAC,KAAf,EAAtB;MAEA,cAAc,CACV,aADU,EAEV;QACI,OAAO,EAAE,MAAM;UACX,SAAS,CAAC,IAAV,CAAe,aAAf;UACA,QAAQ,CAAC,IAAT,CAAc,IAAd;QACH,CAJL;QAKI,KAAK,EAAE,MAAM;UACT,QAAQ,CAAC,IAAT,CAAc,aAAd;UACA,QAAQ,CAAC,IAAT,CAAc,IAAd;QACH;MARL,CAFU,CAAd;IAYH;;IAED,QAAQ,CAAC,IAAT,CAAc,IAAd;EACH;;AAvFiC,CAAvB,CAAf","file":"dashboardModel.js","sourcesContent":["/**\n * Models the dashboard and its operations.\n *\n * This will keep track of any selected review requests, and can\n * perform operations on them.\n */\nRB.Dashboard = RB.DatagridPage.extend({\n    rowObjectType: RB.ReviewRequest,\n\n    /**\n     * Close all selected review requests.\n     *\n     * This will keep track of all the successes and failures and report\n     * them back to the caller once completed.\n     *\n     * Args:\n     *     options (object):\n     *         Options for the operation.\n     *\n     * Option Args:\n     *     closeType (string):\n     *         The close type to use (submitted or discarded).\n     *\n     *     onDone (function):\n     *         A function to call when the operation is complete.\n     */\n    closeReviewRequests(options) {\n        const reviewRequests = this.selection.clone();\n        const successes = [];\n        const failures = [];\n\n        function closeNext() {\n            if (reviewRequests.length === 0) {\n                this.selection.reset();\n                this.trigger('refresh');\n                options.onDone(successes, failures);\n                return;\n            }\n\n            const reviewRequest = reviewRequests.shift();\n\n            reviewRequest.close({\n                type: options.closeType,\n                success: () => successes.push(reviewRequest),\n                error: () => failures.push(reviewRequest),\n                complete: closeNext.bind(this),\n            });\n        }\n\n        closeNext.call(this);\n    },\n\n    /**\n     * Update the visibility of the selected review requests.\n     *\n     * This expects to be passed in a properly bound function (either\n     * addImmediately or removeImmediately) on either archivedReviewRequests or\n     * mutedReviewRequests. This will keep track of all the successes and\n     * failures, reporting them back to the caller.\n     *\n     * Args:\n     *     visibilityFunc (function):\n     *         The function to call for each review request.\n     */\n    updateVisibility(visibilityFunc) {\n        const reviewRequests = this.selection.clone();\n        const successes = [];\n        const failures = [];\n\n        function hideNext() {\n            if (reviewRequests.length === 0) {\n                this.selection.reset();\n                this.trigger('refresh');\n                return;\n            }\n\n            const reviewRequest = reviewRequests.shift();\n\n            visibilityFunc(\n                reviewRequest,\n                {\n                    success: () => {\n                        successes.push(reviewRequest);\n                        hideNext.call(this);\n                    },\n                    error: () => {\n                        failures.push(reviewRequest);\n                        hideNext.call(this);\n                    },\n                });\n        }\n\n        hideNext.call(this);\n    },\n});\n"]}