{"version":3,"sources":["dashboardPageViewTests.es6.js"],"names":[],"mappings":"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","file":"dashboardPageViewTests.js","sourcesContent":["suite('rb/admin/views/DashboardPageView', function() {\n    const pageTemplate = dedent`\n        <div>\n         <div id=\"admin-dashboard\" style=\"visibility: hidden\">\n          <div class=\"rb-c-admin-widgets\">\n           <div class=\"rb-c-admin-widgets__sizer-gutter\"></div>\n           <div class=\"rb-c-admin-widgets__sizer-column\"></div>\n           <div class=\"rb-c-admin-widgets__main\"></div>\n          </div>\n         </div>\n        </div>\n    `;\n\n    const widgetTemplate = _.template(dedent`\n        <div class=\"rb-c-admin-widget <%- cssClasses %>\" id=\"<%- domID %>\"\n         <header class=\"rb-c-admin-widget__header\">\n          <h1><%- name %></h1>\n          <ul class=\"rb-c-admin-widget__actions\"></ul>\n         </header>\n         <div class=\"rb-c-admin-widget__content\"></div>\n         <footer class=\"rb-c-admin-widget__footer\">\n          <ul class=\"rb-c-admin-widget__actions\"></ul>\n         </footer>\n        </div>\n    `);\n\n    let page;\n    let pageView;\n\n    beforeEach(function() {\n        page = new RB.Admin.DashboardPage();\n        pageView = new RB.Admin.DashboardPageView({\n            el: $(pageTemplate).appendTo($testsScratch),\n            model: page,\n        });\n    });\n\n    describe('Widgets', function() {\n        it('Loading', function() {\n            const $main = pageView.$('.rb-c-admin-widgets__main');\n\n            $main.append(\n                widgetTemplate({\n                    domID: 'widget-1',\n                    name: 'Widget 1',\n                    cssClasses: '-is-small',\n                }),\n                widgetTemplate({\n                    domID: 'widget-2',\n                    name: 'Widget 2',\n                    cssClasses: '',\n                }),\n                widgetTemplate({\n                    domID: 'widget-3',\n                    name: 'Widget 3',\n                    cssClasses: '-is-large',\n                }),\n                widgetTemplate({\n                    domID: 'widget-4',\n                    name: 'Widget 4',\n                    cssClasses: '-is-small',\n                }),\n                widgetTemplate({\n                    domID: 'widget-5',\n                    name: 'Widget 5',\n                    cssClasses: '',\n                }),\n                widgetTemplate({\n                    domID: 'widget-6',\n                    name: 'Widget 6',\n                    cssClasses: '-is-full-size',\n                })\n            );\n\n            page.set('widgetsData', [\n                {\n                    id: 'widget-1',\n                    domID: 'widget-1',\n                    viewClass: 'RB.Admin.WidgetView',\n                    modelClass: 'RB.Admin.Widget',\n                },\n                {\n                    id: 'widget-2',\n                    domID: 'widget-2',\n                    viewClass: 'RB.Admin.WidgetView',\n                    modelClass: 'RB.Admin.Widget',\n                },\n                {\n                    id: 'widget-3',\n                    domID: 'widget-3',\n                    viewClass: 'RB.Admin.WidgetView',\n                    modelClass: 'RB.Admin.Widget',\n                },\n                {\n                    id: 'widget-4',\n                    domID: 'widget-4',\n                    viewClass: 'RB.Admin.WidgetView',\n                    modelClass: 'RB.Admin.Widget',\n                },\n                {\n                    id: 'widget-5',\n                    domID: 'widget-5',\n                    viewClass: 'RB.Admin.WidgetView',\n                    modelClass: 'RB.Admin.Widget',\n                },\n                {\n                    id: 'widget-6',\n                    domID: 'widget-6',\n                    viewClass: 'RB.Admin.WidgetView',\n                    modelClass: 'RB.Admin.Widget',\n                },\n            ]);\n\n            pageView.render();\n\n            const $widgets = pageView._$widgets;\n            expect($widgets.length).toBe(6);\n\n            expect($widgets[0].id).toBe('widget-1');\n            expect($widgets[1].id).toBe('widget-2');\n            expect($widgets[2].id).toBe('widget-3');\n            expect($widgets[3].id).toBe('widget-4');\n            expect($widgets[4].id).toBe('widget-5');\n            expect($widgets[5].id).toBe('widget-6');\n\n            expect($widgets[0]).toHaveClass('js-masonry-item');\n            expect($widgets[1]).toHaveClass('js-masonry-item');\n            expect($widgets[2]).toHaveClass('js-masonry-item');\n            expect($widgets[3]).toHaveClass('js-masonry-item');\n            expect($widgets[4]).toHaveClass('js-masonry-item');\n            expect($widgets[5]).toHaveClass('js-masonry-item');\n\n            const items = pageView._masonry.items;\n            expect(items.length).toBe(6);\n            expect(items[0].element).toBe($widgets[5]);\n            expect(items[1].element).toBe($widgets[2]);\n            expect(items[2].element).toBe($widgets[1]);\n            expect(items[3].element).toBe($widgets[4]);\n            expect(items[4].element).toBe($widgets[0]);\n            expect(items[5].element).toBe($widgets[3]);\n\n            expect(pageView.$el.css('visibility')).toBe('visible');\n        });\n\n        describe('sizeChanged event', function() {\n            let widgetView;\n\n            beforeEach(function() {\n                const $main = pageView.$('.rb-c-admin-widgets__main');\n\n                $main.append(widgetTemplate({\n                    domID: 'widget-1',\n                    name: 'Widget 1',\n                    cssClasses: '',\n                }));\n\n                page.set('widgetsData', [{\n                    id: 'widget-1',\n                    domID: 'widget-1',\n                    viewClass: 'RB.Admin.WidgetView',\n                    modelClass: 'RB.Admin.Widget',\n                }]);\n\n                pageView.render();\n\n                widgetView = pageView._widgetViews['widget-1'];\n                expect(widgetView).not.toBeUndefined();\n\n                spyOn(pageView._masonry, 'layout');\n            });\n\n            it('Causes re-layout on element size change', function () {\n                const $widget = widgetView.$el;\n\n                $widget.width($widget.width() + 100);\n                widgetView.trigger('sizeChanged');\n\n                expect(pageView._masonry.layout).toHaveBeenCalled();\n            });\n\n            it('Ignored when element size does not change', function () {\n                pageView._widgetWidths['widget-1'] = widgetView.$el.width();\n                widgetView.trigger('sizeChanged');\n\n                expect(pageView._masonry.layout).not.toHaveBeenCalled();\n            });\n        });\n    });\n});\n"]}