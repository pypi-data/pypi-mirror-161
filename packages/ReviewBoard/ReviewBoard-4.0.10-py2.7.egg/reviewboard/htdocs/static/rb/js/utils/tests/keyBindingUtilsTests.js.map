{"version":3,"sources":["keyBindingUtilsTests.es6.js"],"names":[],"mappings":"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","file":"keyBindingUtilsTests.js","sourcesContent":["suite('rb/utils/keyBindingUtils', function() {\n    describe('KeyBindingsMixin', function() {\n        function sendKeyPress($el, keyCode, handled) {\n            const evt = jQuery.Event('keypress');\n            evt.which = keyCode.charCodeAt(0);\n            $el.trigger(evt);\n\n            expect(evt.isDefaultPrevented()).toBe(handled);\n            expect(evt.isPropagationStopped()).toBe(handled);\n        }\n\n        it('Registered on create', function() {\n            const MyView = Backbone.View.extend({\n                keyBindings: {},\n            });\n            _.extend(MyView.prototype, RB.KeyBindingsMixin);\n\n            spyOn(MyView.prototype, 'delegateKeyBindings');\n\n            this._view = new MyView();\n            expect(MyView.prototype.delegateKeyBindings).toHaveBeenCalled();\n        });\n\n        it('Unregistered on undelegateEvents', function() {\n            const MyView = Backbone.View.extend({\n                keyBindings: {},\n            });\n            _.extend(MyView.prototype, RB.KeyBindingsMixin);\n\n            const view = new MyView();\n            spyOn(MyView.prototype, 'undelegateKeyBindings');\n\n            view.undelegateEvents();\n            expect(MyView.prototype.undelegateKeyBindings).toHaveBeenCalled();\n        });\n\n        it('Keys to function name', function() {\n            const MyView = Backbone.View.extend({\n                keyBindings: {\n                    'abc': 'myFunc1',\n                    'def': 'myFunc2',\n                },\n\n                myFunc1: function() {},\n                myFunc2: function() {},\n            });\n            _.extend(MyView.prototype, RB.KeyBindingsMixin);\n\n            const view = new MyView();\n            view.render().$el.appendTo($testsScratch);\n\n            spyOn(view, 'myFunc1');\n            spyOn(view, 'myFunc2');\n\n            sendKeyPress(view.$el, 'e', true);\n\n            expect(view.myFunc1).not.toHaveBeenCalled();\n            expect(view.myFunc2).toHaveBeenCalled();\n        });\n\n        it('Keys to function', function() {\n            const MyView = Backbone.View.extend({\n                keyBindings: {\n                    'abc': function() {},\n                    'def': function() {},\n                }\n            });\n            _.extend(MyView.prototype, RB.KeyBindingsMixin);\n\n            const view = new MyView();\n            view.render().$el.appendTo($testsScratch);\n\n            spyOn(view.keyBindings, 'abc');\n            spyOn(view.keyBindings, 'def');\n\n            sendKeyPress(view.$el, 'b', true);\n\n            expect(view.keyBindings.abc).toHaveBeenCalled();\n            expect(view.keyBindings.def).not.toHaveBeenCalled();\n        });\n\n        it('Unmatched keys', function() {\n            const MyView = Backbone.View.extend({\n                keyBindings: {\n                    'abc': function() {},\n                    'def': function() {},\n                }\n            });\n            _.extend(MyView.prototype, RB.KeyBindingsMixin);\n\n            const view = new MyView();\n            view.render().$el.appendTo($testsScratch);\n\n            spyOn(view.keyBindings, 'abc');\n            spyOn(view.keyBindings, 'def');\n\n            sendKeyPress(view.$el, '!', false);\n\n            expect(view.keyBindings.abc).not.toHaveBeenCalled();\n            expect(view.keyBindings.def).not.toHaveBeenCalled();\n        });\n    });\n});\n"]}