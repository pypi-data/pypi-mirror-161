{"version":3,"sources":["userSessionModelTests.es6.js"],"names":[],"mappings":"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","file":"userSessionModelTests.js","sourcesContent":["suite('rb/models/UserSession', function() {\n    describe('create', function() {\n        it('Instance is set', function() {\n            RB.UserSession.instance = null;\n            const session = RB.UserSession.create({\n                username: 'testuser'\n            });\n\n            expect(session).toBe(RB.UserSession.instance);\n        });\n\n        it('Second attempt fails', function() {\n            RB.UserSession.instance = null;\n            RB.UserSession.create({\n                username: 'testuser'\n            });\n\n            expect(console.assert).toHaveBeenCalled();\n            expect(console.assert.calls.argsFor(0)[0]).toBeTruthy();\n\n            expect(() => RB.UserSession.create({ username: 'foo' })).toThrow();\n\n            expect(console.assert).toHaveBeenCalled();\n            expect(console.assert.calls.argsFor(1)[0]).toBeFalsy();\n        });\n    });\n\n    describe('Attributes', function() {\n        let session;\n\n        beforeEach(function() {\n            session = RB.UserSession.instance;\n        });\n\n        describe('diffsShowExtraWhitespace', function() {\n            describe('Loads from cookie', function() {\n                it('When \"true\"', function() {\n                    spyOn($, 'cookie').and.returnValue('true');\n\n                    RB.UserSession.instance = null;\n                    session = RB.UserSession.create({\n                        username: 'testuser'\n                    });\n\n                    expect($.cookie).toHaveBeenCalledWith('show_ew');\n                    expect(session.get('diffsShowExtraWhitespace')).toBe(true);\n                });\n\n                it('When \"false\"', function() {\n                    spyOn($, 'cookie').and.returnValue('false');\n\n                    RB.UserSession.instance = null;\n                    session = RB.UserSession.create({\n                        username: 'testuser'\n                    });\n\n                    expect($.cookie).toHaveBeenCalledWith('show_ew');\n                    expect(session.get('diffsShowExtraWhitespace')).toBe(false);\n                });\n            });\n\n            describe('Sets cookie', function() {\n                beforeEach(function() {\n                    spyOn($, 'cookie');\n                });\n\n                it('When true', function() {\n                    session.attributes.diffsShowExtraWhitespace = false;\n                    session.set('diffsShowExtraWhitespace', true);\n\n                    expect($.cookie).toHaveBeenCalledWith('show_ew', 'true', {\n                        path: SITE_ROOT\n                    });\n                });\n\n                it('When false', function() {\n                    session.attributes.diffsShowExtraWhitespace = true;\n                    session.set('diffsShowExtraWhitespace', false);\n\n                    expect($.cookie).toHaveBeenCalledWith('show_ew', 'false', {\n                        path: SITE_ROOT\n                    });\n                });\n            });\n        });\n    });\n});\n"]}