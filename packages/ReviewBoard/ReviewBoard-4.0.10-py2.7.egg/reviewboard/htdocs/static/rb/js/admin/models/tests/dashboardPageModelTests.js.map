{"version":3,"sources":["dashboardPageModelTests.es6.js"],"names":[],"mappings":"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","file":"dashboardPageModelTests.js","sourcesContent":["suite('rb/admin/models/DashboardPage', function() {\n    let page;\n\n    beforeEach(function() {\n        page = new RB.Admin.DashboardPage();\n    });\n\n    describe('Widgets', function() {\n        it('Loading', function() {\n            page.set('widgetsData', [\n                {\n                    id: 'widget-1',\n                    domID: 'widget-1',\n                    viewClass: 'RB.Admin.WidgetView',\n                    modelClass: 'RB.Admin.Widget',\n                    modelAttrs: {\n                        myAttr: 1,\n                    },\n                    viewOptions: {\n                        myOption: true,\n                    },\n                },\n                {\n                    id: 'widget-2',\n                    domID: 'widget-2',\n                    viewClass: 'RB.Admin.WidgetView',\n                    modelClass: 'RB.Admin.Widget',\n                    modelAttrs: {\n                        myAttr: 2,\n                    },\n                    viewOptions: {\n                        myOption: false,\n                    },\n                },\n            ]);\n\n            const onWidgetLoaded = jasmine.createSpy();\n\n            page.loadWidgets(onWidgetLoaded);\n\n            expect(page.widgets.length).toBe(2);\n\n            const model1 = page.widgets.at(0);\n            const model2 = page.widgets.at(1);\n\n            expect(model1).toBeInstanceOf(RB.Admin.Widget);\n            expect(model1.get('myAttr')).toBe(1);\n\n            expect(model2).toBeInstanceOf(RB.Admin.Widget);\n            expect(model2.get('myAttr')).toBe(2);\n\n            expect(onWidgetLoaded).toHaveBeenCalledTimes(2);\n            expect(onWidgetLoaded).toHaveBeenCalledWith({\n                domID: 'widget-1',\n                ViewType: RB.Admin.WidgetView,\n                viewOptions: {\n                    myOption: true,\n                },\n                widgetModel: model1,\n            });\n            expect(onWidgetLoaded).toHaveBeenCalledWith({\n                domID: 'widget-2',\n                ViewType: RB.Admin.WidgetView,\n                viewOptions: {\n                    myOption: false,\n                },\n                widgetModel: model2,\n            });\n        });\n\n        it('Loading errors sandboxed', function() {\n            spyOn(console, 'error');\n\n            page.set('widgetsData', [\n                {\n                    id: 'widget-1',\n                    domID: 'widget-1',\n                    viewClass: 'BadViewClass',\n                    modelClass: 'BadModelClass',\n                },\n                {\n                    id: 'widget-2',\n                    domID: 'widget-2',\n                    viewClass: 'RB.Admin.WidgetView',\n                    modelClass: 'RB.Admin.Widget',\n                    modelAttrs: {\n                        myAttr: 2,\n                    },\n                    viewOptions: {\n                        myOption: false,\n                    },\n                },\n            ]);\n\n            const onWidgetLoaded = jasmine.createSpy();\n\n            page.loadWidgets(onWidgetLoaded);\n\n            expect(page.widgets.length).toBe(1);\n\n            const model1 = page.widgets.at(0);\n            expect(model1).toBeInstanceOf(RB.Admin.Widget);\n\n            expect(onWidgetLoaded).toHaveBeenCalledTimes(1);\n            expect(onWidgetLoaded).toHaveBeenCalledWith({\n                domID: 'widget-2',\n                ViewType: RB.Admin.WidgetView,\n                viewOptions: {\n                    myOption: false,\n                },\n                widgetModel: model1,\n            });\n\n            expect(console.error).toHaveBeenCalled();\n            const args = console.error.calls.argsFor(0);\n            expect(args[0]).toBe(\n                'Unable to render administration widget \"%s\": %s');\n            expect(args[1]).toBe('widget-1');\n        });\n    });\n});\n"]}