{"version":3,"sources":["newsWidgetView.es6.js"],"names":[],"mappings":";;AAAA;AACA;AACA;AACA,EAAE,CAAC,KAAH,CAAS,cAAT,GAA0B,EAAE,CAAC,KAAH,CAAS,UAAT,CAAoB,MAApB,CAA2B;EACjD,SAAS,EAAE,IADsC;EAEjD,WAAW,8BAFsC;EAIjD,aAAa,EAAE,CAAC,CAAC,QAAF,qVAJkC;;EAkBjD;AACJ;AACA;AACA;AACA;EACI,YAAY,GAAG;IACX,MAAM,KAAK,GAAG,KAAK,KAAnB;IAEA,KAAK,eAAL,CAAqB;MACjB,EAAE,EAAE,WADa;MAEjB,EAAE,EAAE,CAAC,CAAC,8BAAD,CAAD,CACC,IADD,uBAEC,IAFD,CAEM,MAFN,EAEc,KAAK,CAAC,GAAN,CAAU,SAAV,CAFd;IAFa,CAArB;IAOA,MAAM,YAAY,GAAG,KAAK,KAAL,CAAW,GAAX,CAAe,cAAf,CAArB;;IAEA,IAAI,YAAJ,EAAkB;MACd,KAAK,eAAL,CAAqB;QACjB,EAAE,EAAE,WADa;QAEjB,UAAU,EAAE,WAFK;QAGjB,EAAE,EAAE,CAAC,CAAC,8BAAD,CAAD,CACC,IADD,uBAEC,IAFD,CAEM,MAFN,EAEc,YAFd;MAHa,CAArB;IAOH;;IAED,KAAK,QAAL,CAAc,KAAd,EAAqB,aAArB,EACc,MAAM,KAAK,YAAL,CAAkB,IAAlB,CADpB;IAEA,KAAK,QAAL,CAAc,KAAd,EAAqB,kBAArB,EAAyC,KAAK,mBAA9C;IAEA,KAAK,CAAC,QAAN;EACH,CAlDgD;;EAoDjD;AACJ;AACA;AACA;AACA;EACI,aAAa,GAAG;IACZ,KAAK,KAAL,CAAW,QAAX;EACH,CA3DgD;;EA6DjD;AACJ;AACA;AACA;AACA;AACA;EACI,mBAAmB,GAAG;IAClB,MAAM,KAAK,GAAG,KAAK,KAAL,CAAW,GAAX,CAAe,WAAf,CAAd;IAEA,KAAK,YAAL,CAAkB,KAAlB;;IAEA,IAAI,KAAK,CAAC,MAAN,GAAe,CAAnB,EAAsB;MAClB,KAAK,QAAL,CAAc,IAAd,CAAmB,KAAK,aAAL,CAAmB;QAClC,KAAK,EAAE;MAD2B,CAAnB,CAAnB;IAGH,CAJD,MAIO;MACH,MAAM,MAAM,GAAG,CAAC,CAAC,2CAAD,CAAD,CACV,IADU,CACL,WAAW,8HAEb,CAAC,KAAK,KAAL,CAAW,GAAX,CAAe,SAAf,CAAD,CAFa,CADN,CAAf;MAKA,KAAK,QAAL,CACK,KADL,GAEK,MAFL,CAEY,MAFZ;IAGH;;IAED,KAAK,OAAL,CAAa,aAAb;EACH;;AAxFgD,CAA3B,CAA1B","file":"newsWidgetView.js","sourcesContent":["/**\n * A widget for displaying news items from an RSS feed.\n */\nRB.Admin.NewsWidgetView = RB.Admin.WidgetView.extend({\n    canReload: true,\n    reloadTitle: gettext('Reload news posts'),\n\n    itemsTemplate: _.template(dedent`\n        <% _.each(items, function(item) { %>\n         <a href=\"<%- item.url %>\" class=\"rb-c-admin-news-widget__item\"\n            target=\"_blank\">\n          <span class=\"rb-c-admin-news-widget__item-date\">\n           <%- item.date.format('MMM DD') %>\n          </span>\n          <span class=\"rb-c-admin-news-widget__item-title\">\n           <%- item.title %>\n          </span>\n         </a>\n        <% }) %>\n    `),\n\n    /**\n     * Render the widget.\n     *\n     * This will set up the actions and begin loading the news.\n     */\n    renderWidget() {\n        const model = this.model;\n\n        this.addFooterAction({\n            id: 'more-news',\n            el: $('<a href=\"#\" target=\"_blank\">')\n                .text(gettext('More News'))\n                .attr('href', model.get('newsURL')),\n        });\n\n        const subscribeURL = this.model.get('subscribeURL');\n\n        if (subscribeURL) {\n            this.addFooterAction({\n                id: 'subscribe',\n                cssClasses: '-is-right',\n                el: $('<a href=\"#\" target=\"_blank\">')\n                    .text(gettext('Subscribe'))\n                    .attr('href', subscribeURL),\n            });\n        }\n\n        this.listenTo(model, 'loadingNews',\n                      () => this.setReloading(true));\n        this.listenTo(model, 'change:newsItems', this._onNewsItemsChanged);\n\n        model.loadNews();\n    },\n\n    /**\n     * Reload the news posts.\n     *\n     * This is called in response to a user clicking the Reload action.\n     */\n    reloadContent() {\n        this.model.loadNews();\n    },\n\n    /**\n     * Handle changes to the list of loaded news items.\n     *\n     * If the list is empty, this will present an error pointing to the news\n     * feed. Otherwise, it will render each of the news items.\n     */\n    _onNewsItemsChanged() {\n        const items = this.model.get('newsItems');\n\n        this.setReloading(false);\n\n        if (items.length > 0) {\n            this.$content.html(this.itemsTemplate({\n                items: items,\n            }));\n        } else {\n            const $error = $('<p class=\"rb-c-admin-news-widget__error\">')\n                .html(interpolate(\n                    gettext('There was an error loading the news. Please <a href=\"%s\">visit the news page</a> directly, or try again later.'),\n                    [this.model.get('newsURL')]));\n\n            this.$content\n                .empty()\n                .append($error);\n        }\n\n        this.trigger('sizeChanged');\n    },\n});\n"]}