{"version":3,"sources":["reviewReplyDraftBannerViewTests.es6.js"],"names":[],"mappings":";;AAAA,KAAK,CAAC,uDAAD,EAA0D,YAAW;EACtE,IAAI,WAAJ;EACA,IAAI,IAAJ;EAEA,UAAU,CAAC,YAAW;IAClB,WAAW,GAAG,IAAI,EAAE,CAAC,WAAP,EAAd;IACA,IAAI,GAAG,IAAI,EAAE,CAAC,iBAAH,CAAqB,0BAAzB,CAAoD;MACvD,KAAK,EAAE,WADgD;MAEvD,eAAe,EAAE,aAFsC;MAGvD,mBAAmB,EAAE,IAAI,EAAE,CAAC,mBAAP,CAA2B;QAC5C,aAAa,EAAE,IAAI,EAAE,CAAC,aAAP;MAD6B,CAA3B;IAHkC,CAApD,CAAP;IAOA,IAAI,CAAC,MAAL,GAAc,GAAd,CAAkB,QAAlB,CAA2B,aAA3B;EACH,CAVS,CAAV;EAYA,QAAQ,CAAC,SAAD,EAAY,YAAW;IAC3B,EAAE,CAAC,SAAD,EAAY,YAAW;MACrB,KAAK,CAAC,WAAD,EAAc,SAAd,CAAL;MACA,IAAI,CAAC,CAAL,CAAO,iBAAP,EAA0B,KAA1B;MACA,MAAM,CAAC,WAAW,CAAC,OAAb,CAAN,CAA4B,gBAA5B;IACH,CAJC,CAAF;IAMA,EAAE,CAAC,SAAD,EAAY,YAAW;MACrB,KAAK,CAAC,WAAD,EAAc,SAAd,CAAL;MACA,IAAI,CAAC,CAAL,CAAO,iBAAP,EAA0B,KAA1B;MACA,MAAM,CAAC,WAAW,CAAC,OAAb,CAAN,CAA4B,gBAA5B;IACH,CAJC,CAAF;EAKH,CAZO,CAAR;EAcA,QAAQ,CAAC,gBAAD,EAAmB,YAAW;IAClC,QAAQ,CAAC,SAAD,EAAY,YAAW;MAC3B,IAAI,QAAJ;MAEA,UAAU,CAAC,YAAW;QAClB,QAAQ,GAAG,IAAI,CAAC,CAAL,CAAO,OAAP,CAAX;MACH,CAFS,CAAV;MAIA,QAAQ,CAAC,UAAD,EAAa,YAAW;QAC5B,EAAE,CAAC,aAAD,EAAgB,YAAW;UACzB,MAAM,CAAC,QAAQ,CAAC,IAAT,CAAc,UAAd,CAAD,CAAN,CAAkC,IAAlC,CAAuC,KAAvC;UACA,WAAW,CAAC,OAAZ,CAAoB,QAApB;UACA,MAAM,CAAC,QAAQ,CAAC,IAAT,CAAc,UAAd,CAAD,CAAN,CAAkC,IAAlC,CAAuC,IAAvC;QACH,CAJC,CAAF;QAMA,EAAE,CAAC,iBAAD,EAAoB,YAAW;UAC7B,MAAM,CAAC,QAAQ,CAAC,IAAT,CAAc,UAAd,CAAD,CAAN,CAAkC,IAAlC,CAAuC,KAAvC;UACA,WAAW,CAAC,OAAZ,CAAoB,YAApB;UACA,MAAM,CAAC,QAAQ,CAAC,IAAT,CAAc,UAAd,CAAD,CAAN,CAAkC,IAAlC,CAAuC,IAAvC;QACH,CAJC,CAAF;MAKH,CAZO,CAAR;MAcA,QAAQ,CAAC,SAAD,EAAY,YAAW;QAC3B,EAAE,CAAC,YAAD,EAAe,YAAW;UACxB,QAAQ,CAAC,IAAT,CAAc,UAAd,EAA0B,IAA1B;UACA,WAAW,CAAC,OAAZ,CAAoB,OAApB;UACA,MAAM,CAAC,QAAQ,CAAC,IAAT,CAAc,UAAd,CAAD,CAAN,CAAkC,IAAlC,CAAuC,KAAvC;QACH,CAJC,CAAF;MAKH,CANO,CAAR;IAOH,CA5BO,CAAR;EA6BH,CA9BO,CAAR;EAgCA,QAAQ,CAAC,SAAD,EAAY,YAAW;IAC3B,UAAU,CAAC,YAAW;MAClB,KAAK,CAAC,WAAD,EAAc,eAAd,CAAL,CAAoC,GAApC,CAAwC,QAAxC,CACI,CAAC,OAAD,EAAU,OAAV,KAAsB,OAAO,CAAC,OAAR,CAAgB,IAAhB,CAAqB,OAArB,CAD1B;MAGA,KAAK,CAAC,WAAD,EAAc,SAAd,CAAL;IACH,CALS,CAAV;IAOA,QAAQ,CAAC,wBAAD,EAA2B,YAAW;MAC1C,UAAU,CAAC,YAAW;QAClB,IAAI,CAAC,MAAL;QACA,IAAI,GAAG,IAAI,EAAE,CAAC,iBAAH,CAAqB,0BAAzB,CAAoD;UACvD,KAAK,EAAE,WADgD;UAEvD,eAAe,EAAE,aAFsC;UAGvD,mBAAmB,EAAE,IAAI,EAAE,CAAC,mBAAP,CAA2B;YAC5C,aAAa,EAAE,IAAI,EAAE,CAAC,aAAP,EAD6B;YAE5C,aAAa,EAAE;UAF6B,CAA3B;QAHkC,CAApD,CAAP;QAQA,IAAI,CAAC,MAAL,GAAc,GAAd,CAAkB,QAAlB,CAA2B,aAA3B;MACH,CAXS,CAAV;MAaA,EAAE,CAAC,kBAAD,EAAqB,YAAW;QAC9B,CAAC,CAAC,aAAD,CAAD,CAAiB,IAAjB,CAAsB,SAAtB,EAAiC,IAAjC;QAEA,CAAC,CAAC,iBAAD,CAAD,CAAqB,KAArB;QAEA,MAAM,CAAC,WAAW,CAAC,OAAb,CAAN,CAA4B,gBAA5B;QACA,MAAM,CAAC,WAAW,CAAC,OAAZ,CAAoB,KAApB,CAA0B,OAA1B,CAAkC,CAAlC,EAAqC,CAArC,EAAwC,OAAzC,CAAN,CACK,IADL,CACU,KADV;MAEH,CARC,CAAF;MAUA,EAAE,CAAC,mBAAD,EAAsB,YAAW;QAC/B,CAAC,CAAC,aAAD,CAAD,CAAiB,IAAjB,CAAsB,SAAtB,EAAiC,KAAjC;QAEA,CAAC,CAAC,iBAAD,CAAD,CAAqB,KAArB;QAEA,MAAM,CAAC,WAAW,CAAC,OAAb,CAAN,CAA4B,gBAA5B;QACA,MAAM,CAAC,WAAW,CAAC,OAAZ,CAAoB,KAApB,CAA0B,OAA1B,CAAkC,CAAlC,EAAqC,CAArC,EAAwC,OAAzC,CAAN,CACK,IADL,CACU,IADV;MAEH,CARC,CAAF;IASH,CAjCO,CAAR;IAmCA,EAAE,CAAC,2BAAD,EAA8B,YAAW;MACvC,CAAC,CAAC,iBAAD,CAAD,CAAqB,KAArB;MAEA,MAAM,CAAC,CAAC,CAAC,aAAD,CAAD,CAAiB,MAAlB,CAAN,CAAgC,OAAhC,CAAwC,CAAxC;MACA,MAAM,CAAC,WAAW,CAAC,OAAb,CAAN,CAA4B,gBAA5B;MACA,MAAM,CAAC,WAAW,CAAC,OAAZ,CAAoB,KAApB,CAA0B,OAA1B,CAAkC,CAAlC,EAAqC,CAArC,EAAwC,OAAzC,CAAN,CAAwD,IAAxD,CAA6D,KAA7D;IACH,CANC,CAAF;EAOH,CAlDO,CAAR;AAmDH,CAjHI,CAAL","file":"reviewReplyDraftBannerViewTests.js","sourcesContent":["suite('rb/reviewRequestPage/views/ReviewReplyDraftBannerView', function() {\n    let reviewReply;\n    let view;\n\n    beforeEach(function() {\n        reviewReply = new RB.ReviewReply();\n        view = new RB.ReviewRequestPage.ReviewReplyDraftBannerView({\n            model: reviewReply,\n            $floatContainer: $testsScratch,\n            reviewRequestEditor: new RB.ReviewRequestEditor({\n                reviewRequest: new RB.ReviewRequest(),\n            }),\n        });\n        view.render().$el.appendTo($testsScratch);\n    });\n\n    describe('Actions', function() {\n        it('Discard', function() {\n            spyOn(reviewReply, 'destroy');\n            view.$('.discard-button').click();\n            expect(reviewReply.destroy).toHaveBeenCalled();\n        });\n\n        it('Publish', function() {\n            spyOn(reviewReply, 'publish');\n            view.$('.publish-button').click();\n            expect(reviewReply.publish).toHaveBeenCalled();\n        });\n    });\n\n    describe('Event Handling', function() {\n        describe('Buttons', function() {\n            let $buttons;\n\n            beforeEach(function() {\n                $buttons = view.$('input');\n            });\n\n            describe('Disabled', function() {\n                it('When saving', function() {\n                    expect($buttons.prop('disabled')).toBe(false);\n                    reviewReply.trigger('saving');\n                    expect($buttons.prop('disabled')).toBe(true);\n                });\n\n                it('When destroying', function() {\n                    expect($buttons.prop('disabled')).toBe(false);\n                    reviewReply.trigger('destroying');\n                    expect($buttons.prop('disabled')).toBe(true);\n                });\n            });\n\n            describe('Enabled', function() {\n                it('When saved', function() {\n                    $buttons.prop('disabled', true);\n                    reviewReply.trigger('saved');\n                    expect($buttons.prop('disabled')).toBe(false);\n                });\n            });\n        });\n    });\n\n    describe('Publish', function() {\n        beforeEach(function() {\n            spyOn(reviewReply, 'ensureCreated').and.callFake(\n                (options, context) => options.success.call(context));\n\n            spyOn(reviewReply, 'publish');\n        });\n\n        describe('With Send E-Mail shown', function() {\n            beforeEach(function() {\n                view.remove();\n                view = new RB.ReviewRequestPage.ReviewReplyDraftBannerView({\n                    model: reviewReply,\n                    $floatContainer: $testsScratch,\n                    reviewRequestEditor: new RB.ReviewRequestEditor({\n                        reviewRequest: new RB.ReviewRequest(),\n                        showSendEmail: true\n                    })\n                });\n                view.render().$el.appendTo($testsScratch);\n            });\n\n            it('Send E-Mail true', function() {\n                $('.send-email').prop('checked', true);\n\n                $('.publish-button').click();\n\n                expect(reviewReply.publish).toHaveBeenCalled();\n                expect(reviewReply.publish.calls.argsFor(0)[0].trivial)\n                    .toBe(false);\n            });\n\n            it('Send E-Mail false', function() {\n                $('.send-email').prop('checked', false);\n\n                $('.publish-button').click();\n\n                expect(reviewReply.publish).toHaveBeenCalled();\n                expect(reviewReply.publish.calls.argsFor(0)[0].trivial)\n                    .toBe(true);\n            });\n        });\n\n        it('Without Send E-Mail shown', function() {\n            $('.publish-button').click();\n\n            expect($('.send-email').length).toEqual(0);\n            expect(reviewReply.publish).toHaveBeenCalled();\n            expect(reviewReply.publish.calls.argsFor(0)[0].trivial).toBe(false);\n        });\n    });\n});\n"]}