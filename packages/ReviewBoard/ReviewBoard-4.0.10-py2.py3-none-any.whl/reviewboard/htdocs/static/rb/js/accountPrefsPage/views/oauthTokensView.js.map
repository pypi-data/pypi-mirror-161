{"version":3,"sources":["oauthTokensView.es6.js"],"names":[],"mappings":";;AAAA,CAAC,YAAW;EAGZ,MAAM,mBAAmB,0EAAzB;EAGA;AACA;AACA;;EACA,MAAM,cAAc,GAAG,OAAO,CAAC,MAAR,CAAe,QAAf,CAAwB,MAAxB,CAA+B;IAClD,QAAQ,EAAE,CAAC,CAAC,QAAF,CAAW;MACjB,MAAM,EAAE,EADS;MAEjB,WAAW,EAAE,EAFI;MAGjB,UAAU,EAAE;IAHK,CAAX,EAIP,OAAO,CAAC,MAAR,CAAe,QAAf,CAAwB,SAAxB,CAAkC,QAJ3B;EADwC,CAA/B,CAAvB;EASA;AACA;AACA;;EACA,MAAM,kBAAkB,GAAG,OAAO,CAAC,MAAR,CAAe,YAAf,CAA4B,MAA5B,CAAmC;IAC1D,QAAQ,EAAE,CAAC,CAAC,QAAF,+DADgD;IAK1D,cAAc,EAAE;MACZ,UAAU;IADE,CAL0C;;IAS1D;AACJ;AACA;IACI,gBAAgB,GAAG;MACf,EAAE,CAAC,OAAH,CAAW;QACP,GAAG,EAAE,KAAK,KAAL,CAAW,GAAX,CAAe,QAAf,CADE;QAEP,MAAM,EAAE,QAFD;QAGP,OAAO,EAAE,MAAM,KAAK,KAAL,CAAW,OAAX,CAAmB,SAAnB,CAHR;QAIP,KAAK,EAAE,GAAG,IAAI,KAAK,CAAC,GAAG,CAAC,SAAJ,IAAiB,mBAAlB;MAJZ,CAAX;IAMH;;EAnByD,CAAnC,CAA3B;EAuBA;AACA;AACA;;EACA,EAAE,CAAC,eAAH,GAAqB,QAAQ,CAAC,IAAT,CAAc,MAAd,CAAqB;IACtC,QAAQ,EAAE,CAAC,CAAC,QAAF,0IAD4B;;IAStC;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;IACI,UAAU,CAAC,OAAD,EAAU;MAChB,KAAK,UAAL,GAAkB,IAAI,QAAQ,CAAC,UAAb,CAAwB,OAAO,CAAC,MAAhC,EAAwC;QACtD,KAAK,EAAE;MAD+C,CAAxC,CAAlB;IAGH,CAxBqC;;IA0BtC;AACJ;AACA;AACA;AACA;AACA;AACA;IACI,MAAM,GAAG;MACL,KAAK,GAAL,CAAS,IAAT,CAAc,KAAK,QAAL,CAAc;QACxB,SAAS;MADe,CAAd,CAAd;MAGA,KAAK,MAAL,GAAc,KAAK,CAAL,CAAO,mBAAP,CAAd;MACA,KAAK,SAAL,GAAiB,IAAI,OAAO,CAAC,MAAR,CAAe,QAAnB,CAA4B;QACzC,QAAQ,EAAE,kBAD+B;QAEzC,KAAK,EAAE,IAAI,OAAO,CAAC,MAAR,CAAe,IAAnB,CAAwB,EAAxB,EAA4B;UAC/B,UAAU,EAAE,KAAK;QADc,CAA5B;MAFkC,CAA5B,CAAjB;;MAOA,KAAK,SAAL,CACK,MADL,GACc,GADd,CAEK,SAFL,CAEe,KAAK,MAFpB;;MAIA,OAAO,IAAP;IACH;;EAlDqC,CAArB,CAArB;AAsDC,CArGD","file":"oauthTokensView.js","sourcesContent":["(function() {\n\n\nconst xhrUnknownErrorText = gettext('An unexpected error occurred. Could not delete OAuth2 token.');\n\n\n/**\n * A model representing an OAuth token.\n */\nconst OAuthTokenItem = Djblets.Config.ListItem.extend({\n    defaults: _.defaults({\n        apiURL: '',\n        application: '',\n        showRemove: true,\n    }, Djblets.Config.ListItem.prototype.defaults),\n});\n\n\n/**\n * A view representing a single OAuthTokenItem.\n */\nconst OAuthTokenItemView = Djblets.Config.ListItemView.extend({\n    template: _.template(dedent`\n        <span class=\"config-token-name\"><%- application %></span>\n    `),\n\n    actionHandlers: {\n        'delete': '_onDeleteClicked',\n    },\n\n    /**\n     * Delete the OAuth2 token.\n     */\n    _onDeleteClicked() {\n        RB.apiCall({\n            url: this.model.get('apiURL'),\n            method: 'DELETE',\n            success: () => this.model.trigger('destroy'),\n            error: xhr => alert(xhr.errorText || xhrUnknownErrorText),\n        });\n    },\n});\n\n\n/**\n * A view for managing OAuth2 tokens.\n */\nRB.OAuthTokensView = Backbone.View.extend({\n    template: _.template(dedent`\n        <div class=\"oauth-token-list\">\n         <div class=\"djblets-l-config-forms-container -is-top-flush\">\n          <%- emptyText %>\n         </div>\n        </div>\n    `),\n\n    /**\n     * Initialize the view.\n     *\n     * Args:\n     *     options (object):\n     *         The view options.\n     *\n     * Option Args:\n     *     tokens (array of object):\n     *         The serialized token attributes.\n     */\n    initialize(options) {\n        this.collection = new Backbone.Collection(options.tokens, {\n            model: OAuthTokenItem,\n        });\n    },\n\n    /**\n     * Render the view.\n     *\n     * Returns:\n     *     RB.OAuthTokensView:\n     *     This view.\n     */\n    render() {\n        this.$el.html(this.template({\n            emptyText: _`You do not have any OAuth2 tokens.`,\n        }));\n        this._$list = this.$('.oauth-token-list');\n        this._listView = new Djblets.Config.ListView({\n            ItemView: OAuthTokenItemView,\n            model: new Djblets.Config.List({}, {\n                collection: this.collection,\n            }),\n        });\n\n        this._listView\n            .render().$el\n            .prependTo(this._$list);\n\n        return this;\n    },\n});\n\n\n})();\n"]}