{"version":3,"sources":["textBasedReviewableViewTests.es6.js"],"names":[],"mappings":"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","file":"textBasedReviewableViewTests.js","sourcesContent":["suite('rb/views/TextBasedReviewableView', function() {\n    const template = dedent`\n      <div id=\"container\">\n       <div class=\"text-review-ui-views\">\n        <ul>\n         <li class=\"active\" data-view-mode=\"rendered\">\n          <a href=\"#rendered\">Rendered</a>\n         </li>\n         <li data-view-mode=\"source\"><a href=\"#source\">Source</a></li>\n        </ul>\n       </div>\n       <table class=\"text-review-ui-rendered-table\"></table>\n       <table class=\"text-review-ui-text-table\"></table>\n      </div>\n    `;\n\n    let $container;\n    let reviewRequest;\n    let model;\n    let view;\n\n    beforeEach(function() {\n        $container = $(template).appendTo($testsScratch);\n\n        reviewRequest = new RB.ReviewRequest({\n            reviewURL: '/r/123/',\n        });\n\n        model = new RB.TextBasedReviewable({\n            hasRenderedView: true,\n            viewMode: 'rendered',\n            fileAttachmentID: 456,\n            reviewRequest: reviewRequest,\n        });\n\n        view = new RB.TextBasedReviewableView({\n            model: model,\n            el: $container,\n        });\n\n        /*\n         * Disable the router so that the page doesn't change the URL on the\n         * page while tests run.\n         */\n        spyOn(window.history, 'pushState');\n        spyOn(window.history, 'replaceState');\n\n        /*\n         * Bypass all the actual history logic and get to the actual\n         * router handler.\n         */\n        spyOn(Backbone.history, 'matchRoot').and.returnValue(true);\n        spyOn(view.router, 'trigger').and.callThrough();\n        spyOn(view.router, 'navigate').and.callFake((url, options) => {\n            if (!options || options.trigger !== false) {\n                Backbone.history.loadUrl(url);\n            }\n        });\n\n        view.render();\n    });\n\n    afterEach(function() {\n        view.remove();\n        $container.remove();\n\n        Backbone.history.stop();\n    });\n\n    it('Router switches view modes', function() {\n        view.router.navigate('#rendered');\n        expect(view.router.trigger).toHaveBeenCalledWith('route:viewMode', 'rendered', null, null);\n        expect($container.find('.active').attr('data-view-mode')).toBe('rendered');\n        expect(model.get('viewMode')).toBe('rendered');\n\n        view.router.navigate('#source');\n        expect(view.router.trigger).toHaveBeenCalledWith('route:viewMode', 'source', null, null);\n        expect($container.find('.active').attr('data-view-mode')).toBe('source');\n        expect(model.get('viewMode')).toBe('source');\n\n        view.router.navigate('#rendered');\n        expect(view.router.trigger).toHaveBeenCalledWith('route:viewMode', 'rendered', null, null);\n        expect($container.find('.active').attr('data-view-mode')).toBe('rendered');\n        expect(model.get('viewMode')).toBe('rendered');\n    });\n});\n"]}