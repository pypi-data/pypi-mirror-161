{"version":3,"sources":["inlineFormViewTests.es6.js"],"names":[],"mappings":"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","file":"inlineFormViewTests.js","sourcesContent":["suite('rb/admin/views/InlineFormView', function() {\n    const template = _.template(dedent`\n        <div class=\"rb-c-admin-form-inline\">\n         <h3 class=\"rb-c-admin-form-inline__title\">\n          <span class=\"rb-c-admin-form-inline__title-prefix\"></span>\n          <span class=\"rb-c-admin-form-inline__title-object\"></span>\n          <span class=\"rb-c-admin-form-inline__title-index\"></span>\n          <span class=\"rb-c-admin-form-inline__actions\">\n           <span class=\"rb-c-admin-form-inline__delete-action\"></span>\n          </span>\n         </h3>\n         <fieldset>\n          <div>\n           <label for=\"id_myprefix-<%- index %>-foo\"></label>\n           <input id=\"id_myprefix-<%- index %>-foo\"\n                  name=\"myprefix-<%- index %>-foo\">\n          </div>\n          <div>\n           <label for=\"id_myprefix-<%- index %>-bar\"></label>\n           <input id=\"id_myprefix-<%- index %>-bar\"\n                  name=\"myprefix-<%- index %>-bar\">\n          </div>\n         </fieldset>\n        </div>\n    `);\n\n    let $el;\n    let model;\n    let view;\n\n    beforeEach(function() {\n        $el = $(template({\n            index: '__prefix__',\n        }));\n\n        model = new RB.Admin.InlineForm({\n            prefix: 'myprefix',\n        });\n\n        view = new RB.Admin.InlineFormView({\n            el: $el,\n            model: model,\n        });\n        view.render();\n    });\n\n    describe('Events', function() {\n        describe('Delete clicked', function() {\n            let $delete;\n\n            beforeEach(function() {\n                spyOn(window, 'confirm').and.returnValue(true);\n                spyOn(model, 'destroy');\n\n                $delete = $el.find('.rb-c-admin-form-inline__delete-action');\n            });\n\n            it('With isInitial=true', function() {\n                model.set('isInitial', true);\n\n                $delete.click();\n\n                expect(window.confirm).not.toHaveBeenCalled();\n                expect(model.destroy).not.toHaveBeenCalled();\n            });\n\n            it('With isInitial=false', function() {\n                model.set('isInitial', false);\n\n                $delete.click();\n\n                expect(window.confirm).toHaveBeenCalled();\n                expect(model.destroy).toHaveBeenCalled();\n            });\n        });\n\n        describe('Index changed', function() {\n            let $labels;\n            let $inputs;\n            let $titleIndex;\n\n            beforeEach(function() {\n                $labels = $el.find('label');\n                $inputs = $el.find('input');\n                $titleIndex = $el.find('.rb-c-admin-form-inline__title-index');\n\n                expect($labels.length).toBe(2);\n                expect($inputs.length).toBe(2);\n                expect($titleIndex.length).toBe(1);\n            });\n\n            it('From __prefix__ to index', function() {\n                model.set('index', 0);\n\n                expect($el[0].id).toBe('myprefix-0');\n                expect($titleIndex.text()).toBe('#1');\n\n                expect($labels[0].htmlFor).toBe('id_myprefix-0-foo');\n                expect($labels[1].htmlFor).toBe('id_myprefix-0-bar');\n\n                let inputEl = $inputs[0];\n                expect(inputEl.id).toBe('id_myprefix-0-foo');\n                expect(inputEl.name).toBe('myprefix-0-foo');\n\n                inputEl = $inputs[1];\n                expect(inputEl.id).toBe('id_myprefix-0-bar');\n                expect(inputEl.name).toBe('myprefix-0-bar');\n            });\n\n            it('From index to index', function() {\n                model.set('index', 0);\n                model.set('index', 1);\n\n                expect($el[0].id).toBe('myprefix-1');\n                expect($titleIndex.text()).toBe('#2');\n\n                expect($labels[0].htmlFor).toBe('id_myprefix-1-foo');\n                expect($labels[1].htmlFor).toBe('id_myprefix-1-bar');\n\n                let inputEl = $inputs[0];\n                expect(inputEl.id).toBe('id_myprefix-1-foo');\n                expect(inputEl.name).toBe('myprefix-1-foo');\n\n                inputEl = $inputs[1];\n                expect(inputEl.id).toBe('id_myprefix-1-bar');\n                expect(inputEl.name).toBe('myprefix-1-bar');\n            });\n        });\n    });\n});\n"]}