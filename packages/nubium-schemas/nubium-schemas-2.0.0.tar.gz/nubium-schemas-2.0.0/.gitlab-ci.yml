default:
  image: images.paas.redhat.com/mktg-ops/rocksdb-base:latest
  tags:
    - openshift

stages:
  - ğŸ¤ test
  - ğŸš€ publish

ğŸ§ª test:
  stage: ğŸ¤ test
  before_script:
    - pip install -r requirements.txt
  script:
    - pytest

ğŸš¢ publish:
  stage: ğŸš€ publish
  rules:
    - if: $CI_COMMIT_TAG
  before_script:
    - pip install --upgrade setuptools setuptools_scm twine wheel
  script:
    - ./upload_package.sh
