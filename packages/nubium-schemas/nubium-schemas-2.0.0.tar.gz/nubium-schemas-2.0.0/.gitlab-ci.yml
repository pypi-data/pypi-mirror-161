default:
  image: images.paas.redhat.com/mktg-ops/rocksdb-base:latest
  tags:
    - openshift

stages:
  - 🤞 test
  - 🚀 publish

🧪 test:
  stage: 🤞 test
  before_script:
    - pip install -r requirements.txt
  script:
    - pytest

🚢 publish:
  stage: 🚀 publish
  rules:
    - if: $CI_COMMIT_TAG
  before_script:
    - pip install --upgrade setuptools setuptools_scm twine wheel
  script:
    - ./upload_package.sh
