.\" Man page generated from reStructuredText.
.
.TH "CDIST-TYPE__APT_KEY" "7" "Jul 31, 2022" "7.0.0" "cdist"
.
.nr rst2man-indent-level 0
.
.de1 rstReportMargin
\\$1 \\n[an-margin]
level \\n[rst2man-indent-level]
level margin: \\n[rst2man-indent\\n[rst2man-indent-level]]
-
\\n[rst2man-indent0]
\\n[rst2man-indent1]
\\n[rst2man-indent2]
..
.de1 INDENT
.\" .rstReportMargin pre:
. RS \\$1
. nr rst2man-indent\\n[rst2man-indent-level] \\n[an-margin]
. nr rst2man-indent-level +1
.\" .rstReportMargin post:
..
.de UNINDENT
. RE
.\" indent \\n[an-margin]
.\" old: \\n[rst2man-indent\\n[rst2man-indent-level]]
.nr rst2man-indent-level -1
.\" new: \\n[rst2man-indent\\n[rst2man-indent-level]]
.in \\n[rst2man-indent\\n[rst2man-indent-level]]u
..
.SH NAME
.sp
cdist\-type__apt_key \- Manage the list of keys used by apt
.SH DESCRIPTION
.sp
Manages the list of keys used by apt to authenticate packages.
.sp
This is done by placing the requested key in a file named
\fB$__object_id.gpg\fP in the \fBkeydir\fP directory.
.sp
This is supported by modern releases of Debian\-based distributions.
.sp
In order of preference, exactly one of: \fBsource\fP, \fBuri\fP or \fBkeyid\fP
must be specified.
.SH REQUIRED PARAMETERS
.sp
None.
.SH OPTIONAL PARAMETERS
.INDENT 0.0
.TP
.B keydir
keyring directory, defaults to \fB/etc/apt/trusted.pgp.d\fP, which is
enabled system\-wide by default.
.TP
.B source
path to a file containing the GPG key of the repository.
Using this is recommended as it ensures that the manifest/type manintainer
has validated the key.
If \fB\-\fP, the GPG key is read from the type\(aqs stdin.
.TP
.B state
\(aqpresent\(aq or \(aqabsent\(aq. Defaults to \(aqpresent\(aq
.TP
.B uri
the URI from which to download the key.
It is highly recommended that you only use protocols with TLS like HTTPS.
This uses \fB__download\fP but does not use checksums, if you want to ensure
that the key doesn\(aqt change, you are better off downloading it and using
\fB\-\-source\fP\&.
.UNINDENT
.SH DEPRECATED OPTIONAL PARAMETERS
.INDENT 0.0
.TP
.B keyid
the id of the key to download from the \fBkeyserver\fP\&.
This is to be used in absence of \fB\-\-source\fP and \fB\-\-uri\fP or together
with \fB\-\-use\-deprecated\-apt\-key\fP for key removal.
Defaults to \fB$__object_id\fP\&.
.TP
.B keyserver
the keyserver from which to fetch the key.
Defaults to \fBpool.sks\-keyservers.net\fP\&.
.UNINDENT
.SH DEPRECATED BOOLEAN PARAMETERS
.INDENT 0.0
.TP
.B use\-deprecated\-apt\-key
\fBapt\-key(8)\fP will last be available in Debian 11 and Ubuntu 22.04.
You can use this parameter to force usage of \fBapt\-key(8)\fP\&.
Please only use this parameter to \fIremove\fP keys from the keyring,
in order to prepare for removal of \fBapt\-key\fP\&.
Adding keys should be done without this parameter.
This parameter will be removed when Debian 11 stops being supported.
.UNINDENT
.SH EXAMPLES
.INDENT 0.0
.INDENT 3.5
.sp
.nf
.ft C
# add a key that has been verified by a type maintainer
__apt_key jitsi_meet_2021 \e
   \-\-source cdist\-contrib/type/__jitsi_meet/files/apt_2021.gpg

# remove an old, deprecated or expired key
__apt_key jitsi_meet_2016 \-\-state absent

# Get rid of a key that might have been added to
# /etc/apt/trusted.gpg with apt\-key
__apt_key 0x40976EAF437D05B5 \-\-use\-deprecated\-apt\-key \-\-state absent

# add a key that we define in\-line
__apt_key jitsi_meet_2021 \-\-source \(aq\-\(aq <<EOF
\-\-\-\-\-BEGIN PGP PUBLIC KEY BLOCK\-\-\-\-\-
[...]
\-\-\-\-\-END PGP PUBLIC KEY BLOCK\-\-\-\-\-
EOF

# download or update key from the internet
__apt_key rabbitmq_2007 \e
   \-\-uri https://www.rabbitmq.com/rabbitmq\-signing\-key\-public.asc
.ft P
.fi
.UNINDENT
.UNINDENT
.SH AUTHORS
.sp
Steven Armstrong <\fI\%steven\-cdist\-\-@\-\-armstrong.cc\fP>
Ander Punnar <ander\-at\-kvlt\-dot\-ee>
Evilham <\fI\%contact~~@~~evilham.com\fP>
.SH COPYING
.sp
Copyright (C) 2011\-2021 Steven Armstrong, Ander Punnar and Evilham. You can
redistribute it and/or modify it under the terms of the GNU General Public
License as published by the Free Software Foundation, either version 3 of the
License, or (at your option) any later version.
.SH COPYRIGHT
ungleich GmbH 2021
.\" Generated by docutils manpage writer.
.
